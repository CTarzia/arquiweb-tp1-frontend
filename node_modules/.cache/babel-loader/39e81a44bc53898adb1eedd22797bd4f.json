{"ast":null,"code":"import _defineProperty from \"/home/chiara/repos/arquiweb-tp1/react-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _objectSpread from \"/home/chiara/repos/arquiweb-tp1/react-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nimport _slicedToArray from \"/home/chiara/repos/arquiweb-tp1/react-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"/home/chiara/repos/arquiweb-tp1/react-frontend/src/screens/CreateOrder/index.js\";\n\nimport React, { useState, useEffect } from \"react\";\nimport { useParams } from \"react-router\";\nimport { useLocation } from \"react-router-dom\";\nimport Topbar from \"../../components/Topbar\";\nimport { ROUTES } from \"../../constants/routes\";\nimport styles from \"./styles.module.scss\";\nimport PostOrder from \"./components/PostOrder\";\n\nvar CreateOrder = function CreateOrder() {\n  var _useState = useState({}),\n      _useState2 = _slicedToArray(_useState, 2),\n      order = _useState2[0],\n      setOrder = _useState2[1];\n\n  var _useParams = useParams(),\n      restaurantId = _useParams.id;\n\n  var search = useLocation().search;\n  var tableNumber = new URLSearchParams(search).get(\"mesa\");\n  var restaurantName = new URLSearchParams(search).get(\"name\");\n  var appId = parseInt(new URLSearchParams(search).get(\"appId\"));\n\n  var handleOnInputChange = function handleOnInputChange(evt) {\n    setOrder(_objectSpread(_objectSpread({}, order), {}, _defineProperty({}, evt.target.name, evt.target.value)));\n  };\n\n  var handleSubmit = function handleSubmit(evt) {\n    evt.preventDefault();\n    var type = tableNumber ? \"table\" : \"pickup\";\n    var orderToSend = order;\n\n    if (tableNumber) {\n      orderToSend = _objectSpread(_objectSpread({}, order), {}, {\n        tableNumber: tableNumber\n      });\n    }\n\n    switch (appId) {\n      case 1:\n        fetch(\"https://ver-la-carta.herokuapp.com/orders/\".concat(type, \"/\").concat(restaurantId), {\n          method: \"POST\",\n          body: JSON.stringify(_objectSpread({}, orderToSend)),\n          headers: {\n            \"Content-Type\": \"application/json\"\n          }\n        }).then(function (res) {\n          return res.json();\n        }).then(function (json) {\n          if (tableNumber) {\n            window.alert(\"Su pedido ha sido enviado.\");\n          } else {\n            console.log(json);\n            window.alert(\"Su pedido ha sido enviado. Su n\\xFAmero de pedido es: 1-\".concat(json.orderId, \". \"));\n          }\n        });\n        break;\n\n      case 2:\n        fetch(\"https://arquiweb-tp1.herokuapp.com/api/restaurants/\".concat(restaurantId, \"/orders/new\"), {\n          method: \"POST\",\n          body: JSON.stringify({\n            order_text: orderToSend.content,\n            table_id: 0\n          }),\n          headers: {\n            \"Content-Type\": \"application/json\"\n          }\n        }).then(function (res) {\n          return res.json();\n        }).then(function (json) {\n          console.log(json);\n          window.alert(\"Su pedido ha sido enviado. Su n\\xFAmero de pedido es: 2-\".concat(json.order_id, \".\"));\n        });\n        break;\n\n      default:\n        fetch(\"http://moorfy.com:5000/clients/place_an_order?branch_id=\".concat(restaurantId, \"&table_id=0&user_id=0&order_content=\").concat(orderToSend.content)).then(function (res) {\n          return res.json();\n        }).then(function (json) {\n          console.log(json);\n          window.alert(\"Su pedido ha sido enviado. Su n\\xFAmero de pedido es: 3-\".concat(json[\"orden id\"], \".\"));\n        });\n        break;\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.container,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 3\n    }\n  }, /*#__PURE__*/React.createElement(Topbar, {\n    returnRoute: ROUTES.NEARBY_RESTAURANTS,\n    title: \"Hacer Pedido\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 4\n    }\n  }), /*#__PURE__*/React.createElement(PostOrder, {\n    handleSubmit: handleSubmit,\n    handleOnInputChange: handleOnInputChange,\n    tableNumber: tableNumber,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 4\n    }\n  }));\n};\n\nexport default CreateOrder;","map":{"version":3,"sources":["/home/chiara/repos/arquiweb-tp1/react-frontend/src/screens/CreateOrder/index.js"],"names":["React","useState","useEffect","useParams","useLocation","Topbar","ROUTES","styles","PostOrder","CreateOrder","order","setOrder","restaurantId","id","search","tableNumber","URLSearchParams","get","restaurantName","appId","parseInt","handleOnInputChange","evt","target","name","value","handleSubmit","preventDefault","type","orderToSend","fetch","method","body","JSON","stringify","headers","then","res","json","window","alert","console","log","orderId","order_text","content","table_id","order_id","container","NEARBY_RESTAURANTS"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { useParams } from \"react-router\";\nimport { useLocation } from \"react-router-dom\";\n\nimport Topbar from \"../../components/Topbar\";\nimport { ROUTES } from \"../../constants/routes\";\n\nimport styles from \"./styles.module.scss\";\nimport PostOrder from \"./components/PostOrder\";\n\nconst CreateOrder = () => {\n\tconst [order, setOrder] = useState({});\n\n\tconst { id: restaurantId } = useParams();\n\tconst search = useLocation().search;\n\tconst tableNumber = new URLSearchParams(search).get(\"mesa\");\n\tconst restaurantName = new URLSearchParams(search).get(\"name\");\n\tconst appId = parseInt(new URLSearchParams(search).get(\"appId\"));\n\n\tconst handleOnInputChange = (evt) => {\n\t\tsetOrder({ ...order, [evt.target.name]: evt.target.value });\n\t};\n\n\tconst handleSubmit = (evt) => {\n\t\tevt.preventDefault();\n\n\t\tconst type = tableNumber ? \"table\" : \"pickup\";\n\t\tlet orderToSend = order;\n\t\tif (tableNumber) {\n\t\t\torderToSend = { ...order, tableNumber };\n\t\t}\n\n\t\tswitch (appId) {\n\t\t\tcase 1:\n\t\t\t\tfetch(\n\t\t\t\t\t`https://ver-la-carta.herokuapp.com/orders/${type}/${restaurantId}`,\n\t\t\t\t\t{\n\t\t\t\t\t\tmethod: \"POST\",\n\t\t\t\t\t\tbody: JSON.stringify({ ...orderToSend }),\n\t\t\t\t\t\theaders: {\n\t\t\t\t\t\t\t\"Content-Type\": \"application/json\",\n\t\t\t\t\t\t},\n\t\t\t\t\t}\n\t\t\t\t)\n\t\t\t\t\t.then((res) => res.json())\n\t\t\t\t\t.then((json) => {\n\t\t\t\t\t\tif (tableNumber) {\n\t\t\t\t\t\t\twindow.alert(`Su pedido ha sido enviado.`);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tconsole.log(json);\n\t\t\t\t\t\t\twindow.alert(\n\t\t\t\t\t\t\t\t`Su pedido ha sido enviado. Su n√∫mero de pedido es: 1-${json.orderId}. `\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\tbreak;\n\t\t\tcase 2:\n\t\t\t\tfetch(\n\t\t\t\t\t`https://arquiweb-tp1.herokuapp.com/api/restaurants/${restaurantId}/orders/new`,\n\t\t\t\t\t{\n\t\t\t\t\t\tmethod: \"POST\",\n\t\t\t\t\t\tbody: JSON.stringify({\n\t\t\t\t\t\t\torder_text: orderToSend.content,\n\t\t\t\t\t\t\ttable_id: 0,\n\t\t\t\t\t\t}),\n\t\t\t\t\t\theaders: {\n\t\t\t\t\t\t\t\"Content-Type\": \"application/json\",\n\t\t\t\t\t\t},\n\t\t\t\t\t}\n\t\t\t\t)\n\t\t\t\t\t.then((res) => res.json())\n\t\t\t\t\t.then((json) => {\n\t\t\t\t\t\tconsole.log(json);\n\t\t\t\t\t\twindow.alert(\n\t\t\t\t\t\t\t`Su pedido ha sido enviado. Su n√∫mero de pedido es: 2-${json.order_id}.`\n\t\t\t\t\t\t);\n\t\t\t\t\t});\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tfetch(\n\t\t\t\t\t`http://moorfy.com:5000/clients/place_an_order?branch_id=${restaurantId}&table_id=0&user_id=0&order_content=${orderToSend.content}`\n\t\t\t\t)\n\t\t\t\t\t.then((res) => res.json())\n\t\t\t\t\t.then((json) => {\n\t\t\t\t\t\tconsole.log(json);\n\t\t\t\t\t\twindow.alert(\n\t\t\t\t\t\t\t`Su pedido ha sido enviado. Su n√∫mero de pedido es: 3-${json[\"orden id\"]}.`\n\t\t\t\t\t\t);\n\t\t\t\t\t});\n\t\t\t\tbreak;\n\t\t}\n\t};\n\n\treturn (\n\t\t<div className={styles.container}>\n\t\t\t<Topbar returnRoute={ROUTES.NEARBY_RESTAURANTS} title={`Hacer Pedido`} />\n\t\t\t<PostOrder\n\t\t\t\thandleSubmit={handleSubmit}\n\t\t\t\thandleOnInputChange={handleOnInputChange}\n\t\t\t\ttableNumber={tableNumber}\n\t\t\t/>\n\t\t</div>\n\t);\n};\nexport default CreateOrder;\n"]},"metadata":{},"sourceType":"module"}