{"ast":null,"code":"import _defineProperty from\"/home/chiara/repos/arquiweb-tp1/react-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/home/chiara/repos/arquiweb-tp1/react-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/home/chiara/repos/arquiweb-tp1/react-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import{useParams}from\"react-router\";import{useLocation}from\"react-router-dom\";import Topbar from\"../../components/Topbar\";import{ROUTES}from\"../../constants/routes\";import styles from\"./styles.module.scss\";import PostOrder from\"./components/PostOrder\";var CreateOrder=function CreateOrder(){var _useState=useState({}),_useState2=_slicedToArray(_useState,2),order=_useState2[0],setOrder=_useState2[1];var _useParams=useParams(),restaurantId=_useParams.id;var search=useLocation().search;var tableNumber=new URLSearchParams(search).get(\"mesa\");var restaurantName=new URLSearchParams(search).get(\"name\");var appId=new URLSearchParams(search).get(\"appId\");var handleOnInputChange=function handleOnInputChange(evt){setOrder(_objectSpread(_objectSpread({},order),{},_defineProperty({},evt.target.name,evt.target.value)));};var handleSubmit=function handleSubmit(evt){evt.preventDefault();var type=tableNumber?\"table\":\"pickup\";var orderToSend=order;if(tableNumber){orderToSend=_objectSpread(_objectSpread({},order),{},{tableNumber:tableNumber});}if(appId!==\"2\"){fetch(\"https://ver-la-carta.herokuapp.com/orders/\".concat(type,\"/\").concat(restaurantId),{method:\"POST\",body:JSON.stringify(_objectSpread({},orderToSend)),headers:{\"Content-Type\":\"application/json\"}}).then(function(res){return res.json();}).then(function(json){if(tableNumber){window.alert(\"Su pedido ha sido enviado.\");}else{console.log(json);window.alert(\"Su pedido ha sido enviado. Su n\\xFAmero de pedido es: \".concat(json.orderId,\".\"));}});}else{console.log(\"tendria que haber entrado aca\");fetch(\"https://arquiweb-tp1.herokuapp.com/api/restaurants/\".concat(restaurantId,\"/orders/new\"),{method:\"POST\",body:JSON.stringify({order_text:orderToSend.content}),headers:{\"Content-Type\":\"application/json\"}}).then(function(res){return res.json();}).then(function(json){if(tableNumber){window.alert(\"Su pedido ha sido enviado.\");}else{console.log(json);window.alert(\"Su pedido ha sido enviado. Su n\\xFAmero de pedido es: \".concat(json.orderId,\".\"));}});}};return/*#__PURE__*/React.createElement(\"div\",{className:styles.container},/*#__PURE__*/React.createElement(Topbar,{returnRoute:ROUTES.NEARBY_RESTAURANTS,title:\"Hacer Pedido\"}),/*#__PURE__*/React.createElement(PostOrder,{handleSubmit:handleSubmit,handleOnInputChange:handleOnInputChange,tableNumber:tableNumber}));};export default CreateOrder;","map":{"version":3,"sources":["/home/chiara/repos/arquiweb-tp1/react-frontend/src/screens/CreateOrder/index.js"],"names":["React","useState","useEffect","useParams","useLocation","Topbar","ROUTES","styles","PostOrder","CreateOrder","order","setOrder","restaurantId","id","search","tableNumber","URLSearchParams","get","restaurantName","appId","handleOnInputChange","evt","target","name","value","handleSubmit","preventDefault","type","orderToSend","fetch","method","body","JSON","stringify","headers","then","res","json","window","alert","console","log","orderId","order_text","content","container","NEARBY_RESTAURANTS"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { useParams } from \"react-router\";\nimport { useLocation } from \"react-router-dom\";\n\nimport Topbar from \"../../components/Topbar\";\nimport { ROUTES } from \"../../constants/routes\";\n\nimport styles from \"./styles.module.scss\";\nimport PostOrder from \"./components/PostOrder\";\n\nconst CreateOrder = () => {\n\tconst [order, setOrder] = useState({});\n\n\tconst { id: restaurantId } = useParams();\n\tconst search = useLocation().search;\n\tconst tableNumber = new URLSearchParams(search).get(\"mesa\");\n\tconst restaurantName = new URLSearchParams(search).get(\"name\");\n\tconst appId = new URLSearchParams(search).get(\"appId\");\n\n\tconst handleOnInputChange = (evt) => {\n\t\tsetOrder({ ...order, [evt.target.name]: evt.target.value });\n\t};\n\n\tconst handleSubmit = (evt) => {\n\t\tevt.preventDefault();\n\n\t\tconst type = tableNumber ? \"table\" : \"pickup\";\n\t\tlet orderToSend = order;\n\t\tif (tableNumber) {\n\t\t\torderToSend = { ...order, tableNumber };\n\t\t}\n\n\t\tif (appId !== \"2\") {\n\t\t\tfetch(\n\t\t\t\t`https://ver-la-carta.herokuapp.com/orders/${type}/${restaurantId}`,\n\t\t\t\t{\n\t\t\t\t\tmethod: \"POST\",\n\t\t\t\t\tbody: JSON.stringify({ ...orderToSend }),\n\t\t\t\t\theaders: {\n\t\t\t\t\t\t\"Content-Type\": \"application/json\",\n\t\t\t\t\t},\n\t\t\t\t}\n\t\t\t)\n\t\t\t\t.then((res) => res.json())\n\t\t\t\t.then((json) => {\n\t\t\t\t\tif (tableNumber) {\n\t\t\t\t\t\twindow.alert(`Su pedido ha sido enviado.`);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tconsole.log(json);\n\t\t\t\t\t\twindow.alert(\n\t\t\t\t\t\t\t`Su pedido ha sido enviado. Su número de pedido es: ${json.orderId}.`\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t} else {\n\t\t\tconsole.log(\"tendria que haber entrado aca\");\n\t\t\tfetch(\n\t\t\t\t`https://arquiweb-tp1.herokuapp.com/api/restaurants/${restaurantId}/orders/new`,\n\t\t\t\t{\n\t\t\t\t\tmethod: \"POST\",\n\t\t\t\t\tbody: JSON.stringify({ order_text: orderToSend.content }),\n\t\t\t\t\theaders: {\n\t\t\t\t\t\t\"Content-Type\": \"application/json\",\n\t\t\t\t\t},\n\t\t\t\t}\n\t\t\t)\n\t\t\t\t.then((res) => res.json())\n\t\t\t\t.then((json) => {\n\t\t\t\t\tif (tableNumber) {\n\t\t\t\t\t\twindow.alert(`Su pedido ha sido enviado.`);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tconsole.log(json);\n\t\t\t\t\t\twindow.alert(\n\t\t\t\t\t\t\t`Su pedido ha sido enviado. Su número de pedido es: ${json.orderId}.`\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t}\n\t};\n\n\treturn (\n\t\t<div className={styles.container}>\n\t\t\t<Topbar\n\t\t\t\treturnRoute={ROUTES.NEARBY_RESTAURANTS}\n\t\t\t\ttitle={`Hacer Pedido`}\n\t\t\t/>\n\t\t\t<PostOrder\n\t\t\t\thandleSubmit={handleSubmit}\n\t\t\t\thandleOnInputChange={handleOnInputChange}\n\t\t\t\ttableNumber={tableNumber}\n\t\t\t/>\n\t\t</div>\n\t);\n};\nexport default CreateOrder;\n"]},"metadata":{},"sourceType":"module"}