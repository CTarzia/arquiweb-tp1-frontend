{"ast":null,"code":"import _toConsumableArray from\"/home/chiara/repos/arquiweb-tp1/react-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"/home/chiara/repos/arquiweb-tp1/react-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from\"react\";import{MapContainer,TileLayer,Popup,Marker}from\"react-leaflet\";import{ROUTES}from\"../../constants/routes\";import Topbar from\"../../components/Topbar\";import Restaurant from\"./Restaurant\";import RestaurantInfo from\"./RestaurantInfo\";import styles from\"./styles.module.scss\";var NearbyRestaurants=function NearbyRestaurants(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),restaurantsOne=_useState2[0],setRestaurantsOne=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),restaurantsTwo=_useState4[0],setRestaurantsTwo=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),restaurants=_useState6[0],setRestaurants=_useState6[1];var _useState7=useState(),_useState8=_slicedToArray(_useState7,2),selectedRestaurant=_useState8[0],setSelectedRestaurant=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),isPanelOpen=_useState10[0],setIsPanelOpen=_useState10[1];useEffect(function(){fetch(\"https://ver-la-carta.herokuapp.com/restaurantes/\").then(function(res){console.log(res);if(res.status===200){return res.json();}return{error:\"No se encontraron restaurantes\"};}).then(function(json){if(json.error){console.log(\"error\");}else{setRestaurantsOne(json);}});fetch(\"https://virtserver.swaggerhub.com/adrian-castiglione/arquiweb-tp1/1.0.1/api/restaurants\").then(function(res){return res.json();}).then(function(json){setRestaurantsTwo(json.items);});},[]);useEffect(function(){setRestaurants([].concat(_toConsumableArray(restaurantsOne),_toConsumableArray(restaurantsTwo)));},[restaurantsOne,restaurantsTwo]);var onSelectRestaurant=function onSelectRestaurant(restaurant){setSelectedRestaurant(restaurant);setIsPanelOpen(true);};var closePanel=function closePanel(){return setIsPanelOpen(false);};return/*#__PURE__*/React.createElement(\"div\",{className:styles.container},/*#__PURE__*/React.createElement(Topbar,{returnRoute:ROUTES.HOME,title:\"Restaurantes cercanos\"}),/*#__PURE__*/React.createElement(\"div\",{className:styles.infoContainer},/*#__PURE__*/React.createElement(MapContainer,{className:styles.map,center:[-34.603722,-58.381592],zoom:12,scrollWheelZoom:true},/*#__PURE__*/React.createElement(TileLayer,{url:\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\",attribution:\"\\xA9 <a href=\\\"http://osm.org/copyright\\\">OpenStreetMap</a> contributors\"}),restaurants.map(function(restaurant){return restaurant.latitude&&restaurant.longitude&&/*#__PURE__*/React.createElement(Marker,{position:[parseFloat(restaurant.latitude),parseFloat(restaurant.longitude)]},/*#__PURE__*/React.createElement(Popup,null,/*#__PURE__*/React.createElement(Restaurant,{restaurant:restaurant,handleClick:onSelectRestaurant})));})),selectedRestaurant&&isPanelOpen&&/*#__PURE__*/React.createElement(RestaurantInfo,{restaurant:selectedRestaurant,isOpen:isPanelOpen&&selectedRestaurant,handleClose:closePanel})));};export default NearbyRestaurants;","map":{"version":3,"sources":["/home/chiara/repos/arquiweb-tp1/react-frontend/src/screens/NearbyRestaurants/index.js"],"names":["React","useEffect","useState","MapContainer","TileLayer","Popup","Marker","ROUTES","Topbar","Restaurant","RestaurantInfo","styles","NearbyRestaurants","restaurantsOne","setRestaurantsOne","restaurantsTwo","setRestaurantsTwo","restaurants","setRestaurants","selectedRestaurant","setSelectedRestaurant","isPanelOpen","setIsPanelOpen","fetch","then","res","console","log","status","json","error","items","onSelectRestaurant","restaurant","closePanel","container","HOME","infoContainer","map","latitude","longitude","parseFloat"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { MapContainer, TileLayer, Popup, Marker } from \"react-leaflet\";\n\nimport { ROUTES } from \"../../constants/routes\";\nimport Topbar from \"../../components/Topbar\";\n\nimport Restaurant from \"./Restaurant\";\nimport RestaurantInfo from \"./RestaurantInfo\";\nimport styles from \"./styles.module.scss\";\n\nconst NearbyRestaurants = () => {\n\tconst [restaurantsOne, setRestaurantsOne] = useState([]);\n\tconst [restaurantsTwo, setRestaurantsTwo] = useState([]);\n\tconst [restaurants, setRestaurants] = useState([]);\n\tconst [selectedRestaurant, setSelectedRestaurant] = useState();\n\tconst [isPanelOpen, setIsPanelOpen] = useState(false);\n\n\tuseEffect(() => {\n\t\tfetch(\"https://ver-la-carta.herokuapp.com/restaurantes/\")\n\t\t\t.then((res) => {\n\t\t\t\tconsole.log(res);\n\t\t\t\tif (res.status === 200) {\n\t\t\t\t\treturn res.json();\n\t\t\t\t}\n\t\t\t\treturn { error: \"No se encontraron restaurantes\" };\n\t\t\t})\n\t\t\t.then((json) => {\n\t\t\t\tif (json.error) {\n\t\t\t\t\tconsole.log(\"error\");\n\t\t\t\t} else {\n\t\t\t\t\tsetRestaurantsOne(json);\n\t\t\t\t}\n\t\t\t});\n\t\tfetch(\n\t\t\t\"https://virtserver.swaggerhub.com/adrian-castiglione/arquiweb-tp1/1.0.1/api/restaurants\"\n\t\t)\n\t\t\t.then((res) => res.json())\n\t\t\t.then((json) => {\n\t\t\t\tsetRestaurantsTwo(json.items);\n\t\t\t});\n\t}, []);\n\n\tuseEffect(() => {\n\t\tsetRestaurants([...restaurantsOne, ...restaurantsTwo]);\n\t}, [restaurantsOne, restaurantsTwo]);\n\n\tconst onSelectRestaurant = (restaurant) => {\n\t\tsetSelectedRestaurant(restaurant);\n\t\tsetIsPanelOpen(true);\n\t};\n\n\tconst closePanel = () => setIsPanelOpen(false);\n\n\treturn (\n\t\t<div className={styles.container}>\n\t\t\t<Topbar returnRoute={ROUTES.HOME} title=\"Restaurantes cercanos\" />\n\t\t\t<div className={styles.infoContainer}>\n\t\t\t\t<MapContainer\n\t\t\t\t\tclassName={styles.map}\n\t\t\t\t\tcenter={[-34.603722, -58.381592]}\n\t\t\t\t\tzoom={12}\n\t\t\t\t\tscrollWheelZoom\n\t\t\t\t>\n\t\t\t\t\t<TileLayer\n\t\t\t\t\t\turl=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\n\t\t\t\t\t\tattribution='&copy; <a href=\"http://osm.org/copyright\">OpenStreetMap</a> contributors'\n\t\t\t\t\t/>\n\t\t\t\t\t{restaurants.map(\n\t\t\t\t\t\t(restaurant) =>\n\t\t\t\t\t\t\trestaurant.latitude &&\n\t\t\t\t\t\t\trestaurant.longitude && (\n\t\t\t\t\t\t\t\t<Marker\n\t\t\t\t\t\t\t\t\tposition={[\n\t\t\t\t\t\t\t\t\t\tparseFloat(restaurant.latitude),\n\t\t\t\t\t\t\t\t\t\tparseFloat(restaurant.longitude),\n\t\t\t\t\t\t\t\t\t]}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<Popup>\n\t\t\t\t\t\t\t\t\t\t<Restaurant\n\t\t\t\t\t\t\t\t\t\t\trestaurant={restaurant}\n\t\t\t\t\t\t\t\t\t\t\thandleClick={onSelectRestaurant}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</Popup>\n\t\t\t\t\t\t\t\t</Marker>\n\t\t\t\t\t\t\t)\n\t\t\t\t\t)}\n\t\t\t\t</MapContainer>\n\t\t\t\t{selectedRestaurant && isPanelOpen && (\n\t\t\t\t\t<RestaurantInfo\n\t\t\t\t\t\trestaurant={selectedRestaurant}\n\t\t\t\t\t\tisOpen={isPanelOpen && selectedRestaurant}\n\t\t\t\t\t\thandleClose={closePanel}\n\t\t\t\t\t/>\n\t\t\t\t)}\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n\nexport default NearbyRestaurants;\n"]},"metadata":{},"sourceType":"module"}