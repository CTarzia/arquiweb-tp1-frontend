{"ast":null,"code":"import _toConsumableArray from\"/home/widergy/Documents/Guido/UBA/arqweb/verLaCartaFront/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"/home/widergy/Documents/Guido/UBA/arqweb/verLaCartaFront/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import{Button,ButtonGroup}from\"@mui/material\";import ImageList from\"@mui/material/ImageList\";import ImageListItem from\"@mui/material/ImageListItem\";import styles from\"./styles.module.scss\";var RestaurantInfo=function RestaurantInfo(_ref){var restaurant=_ref.restaurant,isOpen=_ref.isOpen,handleClose=_ref.handleClose;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),restaurantLoading=_useState2[0],setRestaurantLoading=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),imagesLoading=_useState4[0],setImagesLoading=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),photos=_useState6[0],setPhotos=_useState6[1];var onHandleClose=function onHandleClose(){setPhotos([]);handleClose();};useEffect(function(){console.log(restaurant);if(restaurant&&restaurant.id){fetch(\"https://ver-la-carta.herokuapp.com/restaurantes/\".concat(restaurant.id,\"/\")).then(function(res){return res.json();}).then(function(json){if(json.status===404){onHandleClose();}else{setRestaurantLoading(true);}});var fetchImages=function fetchImages(imageId){fetch(\"https://ver-la-carta.herokuapp.com/imagen/\".concat(imageId,\"/\")).then(function(response){return response.blob();}).then(function(image){var localUrl=URL.createObjectURL(image);setPhotos(function(photos){return[].concat(_toConsumableArray(photos),[{url:localUrl,id:imageId}]);});setImagesLoading(true);});};fetch(\"https://ver-la-carta.herokuapp.com/imagen/resto/\".concat(restaurant.id,\"/\")).then(function(response){return response.json();}).then(function(imageIds){imageIds.map(fetchImages);});}},[restaurant]);return restaurantLoading?/*#__PURE__*/React.createElement(\"div\",{className:isOpen?styles.container:styles.closedContainer},/*#__PURE__*/React.createElement(\"div\",{className:styles.title},/*#__PURE__*/React.createElement(\"h2\",{variant:\"h4\",component:\"h2\"},restaurant.name),/*#__PURE__*/React.createElement(\"button\",{onClick:onHandleClose,className:styles.button},\"X\")),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"p\",null,\"Horario de atenci\\xF3n: \",restaurant.workinghours),/*#__PURE__*/React.createElement(\"p\",null,\"Tel\\xE9fono de contacto: \",restaurant.phoneNumber)),/*#__PURE__*/React.createElement(\"div\",null,imagesLoading?/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(ImageList,{sx:{width:340,height:280},cols:2,rowHeight:280},photos.map(function(item){return/*#__PURE__*/React.createElement(ImageListItem,{key:item.url},/*#__PURE__*/React.createElement(\"img\",{src:item.url,alt:item.id,loading:\"lazy\"}));}))):/*#__PURE__*/React.createElement(\"div\",null,\"Recuperando im\\xE1genes de su restaurante...\")),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(ButtonGroup,null,/*#__PURE__*/React.createElement(Button,{variant:\"text\",href:\"http://localhost:3000/menu/\".concat(restaurant.id)},\"Ver Carta\"),/*#__PURE__*/React.createElement(Button,{variant:\"text\",href:\"/restaurante/\".concat(restaurant.id,\"/hacer_pedido\")},\"Hacer Pedido\")))):/*#__PURE__*/React.createElement(\"div\",{className:isOpen?styles.container:styles.closedContainer},\"Recuperando informaci\\xF3n del restaurante.\");};export default RestaurantInfo;","map":{"version":3,"sources":["/home/widergy/Documents/Guido/UBA/arqweb/verLaCartaFront/src/screens/NearbyRestaurants/RestaurantInfo/index.js"],"names":["React","useState","useEffect","Button","ButtonGroup","ImageList","ImageListItem","styles","RestaurantInfo","restaurant","isOpen","handleClose","restaurantLoading","setRestaurantLoading","imagesLoading","setImagesLoading","photos","setPhotos","onHandleClose","console","log","id","fetch","then","res","json","status","fetchImages","imageId","response","blob","image","localUrl","URL","createObjectURL","url","imageIds","map","container","closedContainer","title","name","button","workinghours","phoneNumber","width","height","item"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { Button, ButtonGroup } from \"@mui/material\";\nimport ImageList from \"@mui/material/ImageList\";\nimport ImageListItem from \"@mui/material/ImageListItem\";\n\nimport styles from \"./styles.module.scss\";\n\nconst RestaurantInfo = ({ restaurant, isOpen, handleClose }) => {\n\tconst [restaurantLoading, setRestaurantLoading] = useState(false);\n\tconst [imagesLoading, setImagesLoading] = useState(false);\n\tconst [photos, setPhotos] = useState([]);\n\n\tconst onHandleClose = () => {\n\t\tsetPhotos([]);\n\t\thandleClose();\n\t};\n\n\tuseEffect(() => {\n\t\tconsole.log(restaurant);\n\t\tif (restaurant && restaurant.id) {\n\t\t\tfetch(`https://ver-la-carta.herokuapp.com/restaurantes/${restaurant.id}/`)\n\t\t\t\t.then((res) => res.json())\n\t\t\t\t.then((json) => {\n\t\t\t\t\tif (json.status === 404) {\n\t\t\t\t\t\tonHandleClose();\n\t\t\t\t\t} else {\n\t\t\t\t\t\tsetRestaurantLoading(true);\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\tconst fetchImages = (imageId) => {\n\t\t\t\tfetch(`https://ver-la-carta.herokuapp.com/imagen/${imageId}/`)\n\t\t\t\t\t.then((response) => response.blob())\n\t\t\t\t\t.then((image) => {\n\t\t\t\t\t\tconst localUrl = URL.createObjectURL(image);\n\t\t\t\t\t\tsetPhotos((photos) => [...photos, { url: localUrl, id: imageId }]);\n\t\t\t\t\t\tsetImagesLoading(true);\n\t\t\t\t\t});\n\t\t\t};\n\n\t\t\tfetch(`https://ver-la-carta.herokuapp.com/imagen/resto/${restaurant.id}/`)\n\t\t\t\t.then((response) => response.json())\n\t\t\t\t.then((imageIds) => {\n\t\t\t\t\timageIds.map(fetchImages);\n\t\t\t\t});\n\t\t}\n\t}, [restaurant]);\n\n\treturn restaurantLoading ? (\n\t\t<div className={isOpen ? styles.container : styles.closedContainer}>\n\t\t\t<div className={styles.title}>\n\t\t\t\t<h2 variant=\"h4\" component=\"h2\">\n\t\t\t\t\t{restaurant.name}\n\t\t\t\t</h2>\n\t\t\t\t<button onClick={onHandleClose} className={styles.button}>\n\t\t\t\t\tX\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t\t<div>\n\t\t\t\t<p>Horario de atención: {restaurant.workinghours}</p>\n\t\t\t\t<p>Teléfono de contacto: {restaurant.phoneNumber}</p>\n\t\t\t</div>\n\t\t\t<div>\n\t\t\t\t{imagesLoading ? (\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<ImageList\n\t\t\t\t\t\t\tsx={{ width: 340, height: 280 }}\n\t\t\t\t\t\t\tcols={2}\n\t\t\t\t\t\t\trowHeight={280}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{photos.map((item) => (\n\t\t\t\t\t\t\t\t<ImageListItem key={item.url}>\n\t\t\t\t\t\t\t\t\t<img src={item.url} alt={item.id} loading=\"lazy\" />\n\t\t\t\t\t\t\t\t</ImageListItem>\n\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t</ImageList>\n\t\t\t\t\t</div>\n\t\t\t\t) : (\n\t\t\t\t\t<div>Recuperando imágenes de su restaurante...</div>\n\t\t\t\t)}\n\t\t\t</div>\n\t\t\t<div>\n\t\t\t\t<ButtonGroup>\n\t\t\t\t\t<Button\n\t\t\t\t\t\tvariant=\"text\"\n\t\t\t\t\t\thref={`http://localhost:3000/menu/${restaurant.id}`}\n\t\t\t\t\t>\n\t\t\t\t\t\tVer Carta\n\t\t\t\t\t</Button>\n\t\t\t\t\t<Button\n\t\t\t\t\t\tvariant=\"text\"\n\t\t\t\t\t\thref={`/restaurante/${restaurant.id}/hacer_pedido`}\n\t\t\t\t\t>\n\t\t\t\t\t\tHacer Pedido\n\t\t\t\t\t</Button>\n\t\t\t\t</ButtonGroup>\n\t\t\t</div>\n\t\t</div>\n\t) : (\n\t\t<div className={isOpen ? styles.container : styles.closedContainer}>\n\t\t\tRecuperando información del restaurante.\n\t\t</div>\n\t);\n};\n\nexport default RestaurantInfo;\n"]},"metadata":{},"sourceType":"module"}