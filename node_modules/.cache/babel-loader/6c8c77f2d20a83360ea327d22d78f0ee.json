{"ast":null,"code":"import _toConsumableArray from\"/home/chiara/repos/arquiweb-tp1/react-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"/home/chiara/repos/arquiweb-tp1/react-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from\"react\";import{MapContainer,TileLayer,Popup,Marker}from\"react-leaflet\";import{Link}from\"react-router-dom\";import{ROUTES}from\"../../constants/routes\";import Restaurant from\"./Restaurant\";import RestaurantInfo from\"./RestaurantInfo\";import styles from\"./styles.module.scss\";var NearbyRestaurants=function NearbyRestaurants(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),restaurantsOne=_useState2[0],setRestaurantsOne=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),restaurantsTwo=_useState4[0],setRestaurantsTwo=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),restaurants=_useState6[0],setRestaurants=_useState6[1];var _useState7=useState(),_useState8=_slicedToArray(_useState7,2),selectedRestaurant=_useState8[0],setSelectedRestaurant=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),isPanelOpen=_useState10[0],setIsPanelOpen=_useState10[1];useEffect(function(){fetch(\"https://ver-la-carta.herokuapp.com/restaurantes/\").then(function(res){return res.json();}).then(function(json){if(json.status===404){console.log(\"error\");}else{setRestaurantsOne(json);}});fetch(\"https://virtserver.swaggerhub.com/adrian-castiglione/arquiweb-tp1/1.0.1/api/restaurants\").then(function(res){return res.json();}).then(function(json){setRestaurantsTwo(json.items);});},[]);useEffect(function(){setRestaurants([].concat(_toConsumableArray(restaurantsOne),_toConsumableArray(restaurantsTwo)));},[restaurantsOne,restaurantsTwo]);// console.log(restaurants, selectedRestaurant);\nvar onSelectRestaurant=function onSelectRestaurant(restaurant){setSelectedRestaurant(restaurant);setIsPanelOpen(true);};var closePanel=function closePanel(){return setIsPanelOpen(false);};// console.log(selectedRestaurant);\nreturn/*#__PURE__*/React.createElement(\"div\",{className:styles.container},/*#__PURE__*/React.createElement(\"div\",{className:styles.title},/*#__PURE__*/React.createElement(\"h1\",null,\" Restaurantes cercanos \"),/*#__PURE__*/React.createElement(Link,{to:ROUTES.HOME},/*#__PURE__*/React.createElement(\"button\",{className:styles.button},\" Volver \"))),/*#__PURE__*/React.createElement(\"div\",{className:styles.infoContainer},/*#__PURE__*/React.createElement(MapContainer,{className:styles.map,center:[-34.603722,-58.381592],zoom:12,scrollWheelZoom:true},/*#__PURE__*/React.createElement(TileLayer,{url:\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\",attribution:\"\\xA9 <a href=\\\"http://osm.org/copyright\\\">OpenStreetMap</a> contributors\"}),restaurants.map(function(restaurant){return/*#__PURE__*/React.createElement(Marker,{position:[parseFloat(restaurant.latitude),parseFloat(restaurant.longitude)]},/*#__PURE__*/React.createElement(Popup,null,/*#__PURE__*/React.createElement(\"div\",{className:styles.pin},/*#__PURE__*/React.createElement(Restaurant,{restaurant:restaurant,handleClick:onSelectRestaurant}))));})),selectedRestaurant&&isPanelOpen&&/*#__PURE__*/React.createElement(RestaurantInfo,{restaurant:selectedRestaurant,isOpen:isPanelOpen,handleClose:closePanel})));};export default NearbyRestaurants;","map":{"version":3,"sources":["/home/chiara/repos/arquiweb-tp1/react-frontend/src/screens/NearbyRestaurants/index.js"],"names":["React","useEffect","useState","MapContainer","TileLayer","Popup","Marker","Link","ROUTES","Restaurant","RestaurantInfo","styles","NearbyRestaurants","restaurantsOne","setRestaurantsOne","restaurantsTwo","setRestaurantsTwo","restaurants","setRestaurants","selectedRestaurant","setSelectedRestaurant","isPanelOpen","setIsPanelOpen","fetch","then","res","json","status","console","log","items","onSelectRestaurant","restaurant","closePanel","container","title","HOME","button","infoContainer","map","parseFloat","latitude","longitude","pin"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { MapContainer, TileLayer, Popup, Marker } from \"react-leaflet\";\nimport { Link } from \"react-router-dom\";\n\nimport { ROUTES } from \"../../constants/routes\";\n\nimport Restaurant from \"./Restaurant\";\nimport RestaurantInfo from \"./RestaurantInfo\";\nimport styles from \"./styles.module.scss\";\n\nconst NearbyRestaurants = () => {\n\tconst [restaurantsOne, setRestaurantsOne] = useState([]);\n\tconst [restaurantsTwo, setRestaurantsTwo] = useState([]);\n\tconst [restaurants, setRestaurants] = useState([]);\n\tconst [selectedRestaurant, setSelectedRestaurant] = useState();\n\tconst [isPanelOpen, setIsPanelOpen] = useState(false);\n\n\tuseEffect(() => {\n\t\tfetch(\"https://ver-la-carta.herokuapp.com/restaurantes/\")\n\t\t\t.then((res) => res.json())\n\t\t\t.then((json) => {\n\t\t\t\tif (json.status === 404) {\n\t\t\t\t\tconsole.log(\"error\");\n\t\t\t\t} else {\n\t\t\t\t\tsetRestaurantsOne(json);\n\t\t\t\t}\n\t\t\t});\n\t\tfetch(\n\t\t\t\"https://virtserver.swaggerhub.com/adrian-castiglione/arquiweb-tp1/1.0.1/api/restaurants\"\n\t\t)\n\t\t\t.then((res) => res.json())\n\t\t\t.then((json) => {\n\t\t\t\tsetRestaurantsTwo(json.items);\n\t\t\t});\n\t}, []);\n\n\tuseEffect(() => {\n\t\tsetRestaurants([...restaurantsOne, ...restaurantsTwo]);\n\t}, [restaurantsOne, restaurantsTwo]);\n\n\t// console.log(restaurants, selectedRestaurant);\n\n\tconst onSelectRestaurant = (restaurant) => {\n\t\tsetSelectedRestaurant(restaurant);\n\t\tsetIsPanelOpen(true);\n\t};\n\n\tconst closePanel = () => setIsPanelOpen(false);\n\n\t// console.log(selectedRestaurant);\n\n\treturn (\n\t\t<div className={styles.container}>\n\t\t\t<div className={styles.title}>\n\t\t\t\t<h1> Restaurantes cercanos </h1>\n\t\t\t\t<Link to={ROUTES.HOME}>\n\t\t\t\t\t<button className={styles.button}> Volver </button>\n\t\t\t\t</Link>\n\t\t\t</div>\n\t\t\t<div className={styles.infoContainer}>\n\t\t\t\t<MapContainer\n\t\t\t\t\tclassName={styles.map}\n\t\t\t\t\tcenter={[-34.603722, -58.381592]}\n\t\t\t\t\tzoom={12}\n\t\t\t\t\tscrollWheelZoom\n\t\t\t\t>\n\t\t\t\t\t<TileLayer\n\t\t\t\t\t\turl=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\n\t\t\t\t\t\tattribution='&copy; <a href=\"http://osm.org/copyright\">OpenStreetMap</a> contributors'\n\t\t\t\t\t/>\n\t\t\t\t\t{restaurants.map((restaurant) => (\n\t\t\t\t\t\t<Marker\n\t\t\t\t\t\t\tposition={[\n\t\t\t\t\t\t\t\tparseFloat(restaurant.latitude),\n\t\t\t\t\t\t\t\tparseFloat(restaurant.longitude),\n\t\t\t\t\t\t\t]}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<Popup>\n\t\t\t\t\t\t\t\t<div className={styles.pin}>\n\t\t\t\t\t\t\t\t\t<Restaurant\n\t\t\t\t\t\t\t\t\t\trestaurant={restaurant}\n\t\t\t\t\t\t\t\t\t\thandleClick={onSelectRestaurant}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</Popup>\n\t\t\t\t\t\t</Marker>\n\t\t\t\t\t))}\n\t\t\t\t</MapContainer>\n\t\t\t\t{selectedRestaurant && isPanelOpen && (\n\t\t\t\t\t<RestaurantInfo\n\t\t\t\t\t\trestaurant={selectedRestaurant}\n\t\t\t\t\t\tisOpen={isPanelOpen}\n\t\t\t\t\t\thandleClose={closePanel}\n\t\t\t\t\t/>\n\t\t\t\t)}\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n\nexport default NearbyRestaurants;\n"]},"metadata":{},"sourceType":"module"}