{"ast":null,"code":"import _slicedToArray from\"/home/chiara/repos/arquiweb-tp1/react-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import{useParams}from\"react-router\";import styles from\"./styles.module.scss\";import GoBackButton from\"../../components/GoBack\";import{ROUTES}from\"../../constants/routes\";import{Button,Typography}from\"@mui/material\";import{useLocation}from\"react-router-dom\";var Menu=function Menu(){var _useState=useState(),_useState2=_slicedToArray(_useState,2),restaurantName=_useState2[0],setRestaurantName=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),statusError=_useState4[0],setStatusError=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),restaurantLoading=_useState6[0],setRestaurantLoading=_useState6[1];var _useState7=useState(),_useState8=_slicedToArray(_useState7,2),menu=_useState8[0],setMenu=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),menuLoading=_useState10[0],setMenuLoading=_useState10[1];var _useParams=useParams(),restaurantId=_useParams.restoId;var search=useLocation().search;var tableId=new URLSearchParams(search).get(\"mesa\");function showFile(blob){// It is necessary to create a new blob object with mime-type explicitly set\n// otherwise only Chrome works like it should\nvar newBlob=new Blob([blob],{type:\"application/pdf\"});// IE doesn't allow using a blob object directly as link href\n// instead it is necessary to use msSaveOrOpenBlob\n// For other browsers:\n// Create a link pointing to the ObjectURL containing the blob.\nvar data=window.URL.createObjectURL(newBlob);var link=document.createElement(\"a\");link.href=data;//link.download=\"file.pdf\";\n//link.click();\n//setTimeout(function(){\n//  // For Firefox it is necessary to delay revoking the ObjectURL\n//  window.URL.revokeObjectURL(data);\n//}, 100);\nsetMenu(data);setMenuLoading(true);}useEffect(function(){fetch(\"https://ver-la-carta.herokuapp.com/restaurantes/\".concat(restaurantId)).then(function(res){return res.json();}).then(function(json){if(json.status===404){setStatusError(true);setRestaurantName(\"Su restaurante no ha sido encontrado.\");}else{setRestaurantName(json.name);setRestaurantLoading(true);}});fetch(\"https://ver-la-carta.herokuapp.com/carta/\".concat(restaurantId),{responseType:\"blob\"})//.then(response => response.blob())\n//.then(file => {\n//\tCreate a local URL of that file\n//\tconst fileUrl = URL.createObjectURL(file);\n//\tconsole.log(file);\n//\tsetMenu(fileUrl);\n//\tsetMenuLoading(true);\n.then(function(response){return response.blob();}).then(showFile);//.then(response =>{\n//\tconst file = new Blob([response.data], {type: 'application/pdf'});\n//\tconst url = URL.createObjectURL(file);\n//\tsetMenu(url);\n//\tsetMenuLoading(true);\n//});\n},[]);return restaurantLoading?menuLoading?/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"div\",{className:styles.titleContainer},/*#__PURE__*/React.createElement(Typography,{variant:\"h3\",component:\"h1\"},restaurantName),/*#__PURE__*/React.createElement(GoBackButton,{route:ROUTES.NEARBY_RESTAURANTS})),/*#__PURE__*/React.createElement(Typography,{variant:\"h5\",className:styles.subtitle},\"Menu\"),/*#__PURE__*/React.createElement(\"div\",{className:styles.menuButton},/*#__PURE__*/React.createElement(\"object\",{data:menu,type:\"application/pdf\",width:\"60%\",height:\"500px\"}),/*#__PURE__*/React.createElement(Button,{variant:\"text\",href:tableId?\"/restaurante/\".concat(restaurantId,\"/hacer_pedido?mesa=\").concat(tableId):\"/restaurante/\".concat(restaurantId,\"/hacer_pedido\"),className:styles.submitButton},\"Hacer pedido\"))):/*#__PURE__*/React.createElement(\"div\",null,\"recuperando menu del restaurante\"):/*#__PURE__*/React.createElement(\"div\",null,\"Recuperando informaci\\xF3n del restaurante.\");};export default Menu;","map":{"version":3,"sources":["/home/chiara/repos/arquiweb-tp1/react-frontend/src/screens/Menu/index.js"],"names":["React","useState","useEffect","useParams","styles","GoBackButton","ROUTES","Button","Typography","useLocation","Menu","restaurantName","setRestaurantName","statusError","setStatusError","restaurantLoading","setRestaurantLoading","menu","setMenu","menuLoading","setMenuLoading","restaurantId","restoId","search","tableId","URLSearchParams","get","showFile","blob","newBlob","Blob","type","data","window","URL","createObjectURL","link","document","createElement","href","fetch","then","res","json","status","name","responseType","response","titleContainer","NEARBY_RESTAURANTS","subtitle","menuButton","submitButton"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { useParams } from \"react-router\";\nimport styles from \"./styles.module.scss\";\nimport GoBackButton from \"../../components/GoBack\";\nimport { ROUTES } from \"../../constants/routes\";\nimport { Button, Typography } from \"@mui/material\";\nimport { useLocation } from \"react-router-dom\";\n\nconst Menu = () => {\n\tconst [restaurantName, setRestaurantName] = useState();\n\tconst [statusError, setStatusError] = useState(false);\n\tconst [restaurantLoading, setRestaurantLoading] = useState(false);\n\tconst [menu, setMenu] = useState();\n\tconst [menuLoading, setMenuLoading] = useState(false);\n\n\tconst { restoId: restaurantId } = useParams();\n\tconst search = useLocation().search;\n\tconst tableId = new URLSearchParams(search).get(\"mesa\");\n\n\tfunction showFile(blob) {\n\t\t// It is necessary to create a new blob object with mime-type explicitly set\n\t\t// otherwise only Chrome works like it should\n\t\tvar newBlob = new Blob([blob], { type: \"application/pdf\" });\n\n\t\t// IE doesn't allow using a blob object directly as link href\n\t\t// instead it is necessary to use msSaveOrOpenBlob\n\n\t\t// For other browsers:\n\t\t// Create a link pointing to the ObjectURL containing the blob.\n\t\tconst data = window.URL.createObjectURL(newBlob);\n\t\tvar link = document.createElement(\"a\");\n\t\tlink.href = data;\n\t\t//link.download=\"file.pdf\";\n\t\t//link.click();\n\t\t//setTimeout(function(){\n\t\t//  // For Firefox it is necessary to delay revoking the ObjectURL\n\t\t//  window.URL.revokeObjectURL(data);\n\t\t//}, 100);\n\t\tsetMenu(data);\n\t\tsetMenuLoading(true);\n\t}\n\n\tuseEffect(() => {\n\t\tfetch(`https://ver-la-carta.herokuapp.com/restaurantes/${restaurantId}`)\n\t\t\t.then((res) => res.json())\n\t\t\t.then((json) => {\n\t\t\t\tif (json.status === 404) {\n\t\t\t\t\tsetStatusError(true);\n\t\t\t\t\tsetRestaurantName(\"Su restaurante no ha sido encontrado.\");\n\t\t\t\t} else {\n\t\t\t\t\tsetRestaurantName(json.name);\n\t\t\t\t\tsetRestaurantLoading(true);\n\t\t\t\t}\n\t\t});\n\t\tfetch(`https://ver-la-carta.herokuapp.com/carta/${restaurantId}`,{responseType: \"blob\"})\n\t\t\n\t\t//.then(response => response.blob())\n\t\t//.then(file => {\n\t\t//\tCreate a local URL of that file\n\t\t//\tconst fileUrl = URL.createObjectURL(file);\n\t\t//\tconsole.log(file);\n\t\t//\tsetMenu(fileUrl);\n\t\t//\tsetMenuLoading(true);\n\t\t\n\t\t.then(response => response.blob())\n\t\t.then(showFile)\n\t\t\n\t\t//.then(response =>{\n\t\t//\tconst file = new Blob([response.data], {type: 'application/pdf'});\n\t\t//\tconst url = URL.createObjectURL(file);\n\t\t//\tsetMenu(url);\n\t\t//\tsetMenuLoading(true);\n\t\t//});\n\t}, []);\n\n\treturn restaurantLoading ? (\n\t\tmenuLoading ? (\n\t\t\t<div>\n\t\t\t\t<div className={styles.titleContainer}>\n\t\t\t\t\t<Typography variant=\"h3\" component=\"h1\">\n\t\t\t\t\t\t{restaurantName}\n\t\t\t\t\t</Typography>\n\t\t\t\t\t<GoBackButton route={ROUTES.NEARBY_RESTAURANTS} />\n\t\t\t\t</div>\n\t\t\t\t<Typography variant=\"h5\" className={styles.subtitle}>\n\t\t\t\t\tMenu\n\t\t\t\t</Typography>\n\t\t\t\t<div className={styles.menuButton}>\n\t\t\t\t\t<object\n\t\t\t\t\t\tdata={menu}\n\t\t\t\t\t\ttype=\"application/pdf\"\n\t\t\t\t\t\twidth=\"60%\"\n\t\t\t\t\t\theight=\"500px\"\n\t\t\t\t\t/>\n\n\t\t\t\t\t<Button\n\t\t\t\t\t\tvariant=\"text\"\n\t\t\t\t\t\thref={\n\t\t\t\t\t\t\ttableId\n\t\t\t\t\t\t\t\t? `/restaurante/${restaurantId}/hacer_pedido?mesa=${tableId}`\n\t\t\t\t\t\t\t\t: `/restaurante/${restaurantId}/hacer_pedido`\n\t\t\t\t\t\t}\n\t\t\t\t\t\tclassName={styles.submitButton}\n\t\t\t\t\t>\n\t\t\t\t\t\tHacer pedido\n\t\t\t\t\t</Button>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t) : (\n\t\t\t<div>recuperando menu del restaurante</div>\n\t\t)\n\t) : (\n\t\t<div>Recuperando información del restaurante.</div>\n\t);\n};\n\nexport default Menu;\n"]},"metadata":{},"sourceType":"module"}