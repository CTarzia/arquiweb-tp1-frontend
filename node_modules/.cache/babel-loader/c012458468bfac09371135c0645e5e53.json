{"ast":null,"code":"import _defineProperty from\"/home/chiara/repos/arquiweb-tp1/react-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/home/chiara/repos/arquiweb-tp1/react-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/home/chiara/repos/arquiweb-tp1/react-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useContext}from\"react\";import{Link}from\"react-router-dom\";import{CircularProgress}from\"@mui/material\";import{ROUTES}from\"../../constants/routes\";import{UserContext}from\"../../context\";import PasswordField from\"../../components/PasswordField\";import styles from\"./styles.module.scss\";var LogIn=function LogIn(_ref){var history=_ref.history;var _useContext=useContext(UserContext),setUserId=_useContext.setUserId,setUserName=_useContext.setUserName,setRestaurantId=_useContext.setRestaurantId;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),loading=_useState2[0],setLoading=_useState2[1];var _useState3=useState({username:\"\",password:\"\"}),_useState4=_slicedToArray(_useState3,2),values=_useState4[0],setValues=_useState4[1];var handleSubmit=function handleSubmit(evt){evt.preventDefault();setLoading(true);fetch(\"https://ver-la-carta.herokuapp.com/usuarios/\".concat(values.username,\"/\").concat(values.password)).then(function(res){return res.json();}).then(function(json){setRestaurantId(json.restaurantId);setUserId(json.id);setUserName(json.username);setLoading(false);history.push(ROUTES.BACKOFFICE_HOME);});};var handleChange=function handleChange(e){var _e$target=e.target,id=_e$target.id,value=_e$target.value;setValues(function(prevState){return _objectSpread(_objectSpread({},prevState),{},_defineProperty({},id,value));});};return/*#__PURE__*/React.createElement(\"div\",{className:styles.container},/*#__PURE__*/React.createElement(\"div\",{className:styles.title},/*#__PURE__*/React.createElement(\"h1\",null,\" Bienvenido \")),/*#__PURE__*/React.createElement(\"form\",{onSubmit:handleSubmit,className:styles.form},/*#__PURE__*/React.createElement(\"div\",{className:styles.input},/*#__PURE__*/React.createElement(\"label\",{className:styles.label},\"Nombre de usuario:\"),/*#__PURE__*/React.createElement(\"input\",{type:\"text\",name:\"username\",id:\"username\",onChange:handleChange})),/*#__PURE__*/React.createElement(PasswordField,{onChangePassword:handleChange}),/*#__PURE__*/React.createElement(\"button\",{className:loading?styles.disabledButton:styles.button,onClick:handleSubmit,disabled:loading},loading?/*#__PURE__*/React.createElement(CircularProgress,{classes:{root:styles.progress}}):\"Iniciar sesion\"),/*#__PURE__*/React.createElement(Link,{to:ROUTES.SIGN_UP},/*#__PURE__*/React.createElement(\"button\",{className:styles.button},\"Crear usuario\"))));};export default LogIn;","map":{"version":3,"sources":["/home/chiara/repos/arquiweb-tp1/react-frontend/src/screens/Login/index.js"],"names":["React","useState","useContext","Link","CircularProgress","ROUTES","UserContext","PasswordField","styles","LogIn","history","setUserId","setUserName","setRestaurantId","loading","setLoading","username","password","values","setValues","handleSubmit","evt","preventDefault","fetch","then","res","json","restaurantId","id","push","BACKOFFICE_HOME","handleChange","e","target","value","prevState","container","title","form","input","label","disabledButton","button","root","progress","SIGN_UP"],"mappings":"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","sourcesContent":["import React, { useState, useContext } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { CircularProgress } from \"@mui/material\";\n\nimport { ROUTES } from \"../../constants/routes\";\nimport { UserContext } from \"../../context\";\nimport PasswordField from \"../../components/PasswordField\";\n\nimport styles from \"./styles.module.scss\";\n\nconst LogIn = ({ history }) => {\n\tconst { setUserId, setUserName, setRestaurantId } = useContext(UserContext);\n\n\tconst [loading, setLoading] = useState(false);\n\n\tconst [values, setValues] = useState({\n\t\tusername: \"\",\n\t\tpassword: \"\",\n\t});\n\n\tconst handleSubmit = (evt) => {\n\t\tevt.preventDefault();\n\t\tsetLoading(true);\n\n\t\tfetch(\n\t\t\t`https://ver-la-carta.herokuapp.com/usuarios/${values.username}/${values.password}`\n\t\t)\n\t\t\t.then((res) => res.json())\n\t\t\t.then((json) => {\n\t\t\t\tsetRestaurantId(json.restaurantId);\n\t\t\t\tsetUserId(json.id);\n\t\t\t\tsetUserName(json.username);\n\t\t\t\tsetLoading(false);\n\t\t\t\thistory.push(ROUTES.BACKOFFICE_HOME);\n\t\t\t});\n\t};\n\n\tconst handleChange = (e) => {\n\t\tconst { id, value } = e.target;\n\t\tsetValues((prevState) => ({\n\t\t\t...prevState,\n\t\t\t[id]: value,\n\t\t}));\n\t};\n\n\treturn (\n\t\t<div className={styles.container}>\n\t\t\t<div className={styles.title}>\n\t\t\t\t<h1> Bienvenido </h1>\n\t\t\t</div>\n\n\t\t\t<form onSubmit={handleSubmit} className={styles.form}>\n\t\t\t\t<div className={styles.input}>\n\t\t\t\t\t<label className={styles.label}>Nombre de usuario:</label>\n\t\t\t\t\t<input\n\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\tname=\"username\"\n\t\t\t\t\t\tid=\"username\"\n\t\t\t\t\t\tonChange={handleChange}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t\t<PasswordField onChangePassword={handleChange} />\n\n\t\t\t\t<button\n\t\t\t\t\tclassName={loading ? styles.disabledButton : styles.button}\n\t\t\t\t\tonClick={handleSubmit}\n\t\t\t\t\tdisabled={loading}\n\t\t\t\t>\n\t\t\t\t\t{loading ? (\n\t\t\t\t\t\t<CircularProgress classes={{ root: styles.progress }} />\n\t\t\t\t\t) : (\n\t\t\t\t\t\t\"Iniciar sesion\"\n\t\t\t\t\t)}\n\t\t\t\t</button>\n\n\t\t\t\t<Link to={ROUTES.SIGN_UP}>\n\t\t\t\t\t<button className={styles.button}>Crear usuario</button>\n\t\t\t\t</Link>\n\t\t\t</form>\n\t\t</div>\n\t);\n};\n\nexport default LogIn;\n"]},"metadata":{},"sourceType":"module"}