{"ast":null,"code":"import _defineProperty from \"/home/chiara/repos/arquiweb-tp1/react-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _objectSpread from \"/home/chiara/repos/arquiweb-tp1/react-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nimport _slicedToArray from \"/home/chiara/repos/arquiweb-tp1/react-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"/home/chiara/repos/arquiweb-tp1/react-frontend/src/screens/Signup/index.js\";\n\nimport React, { useEffect, useState } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { Snackbar, Alert, CircularProgress } from \"@mui/material\";\nimport { ROUTES } from \"../../constants/routes\";\nimport PasswordField from \"../../components/PasswordField\";\nimport styles from \"./styles.module.scss\";\n\nvar Signup = function Signup(_ref) {\n  var history = _ref.history;\n\n  var _useState = useState({\n    username: \"\",\n    password: \"\"\n  }),\n      _useState2 = _slicedToArray(_useState, 2),\n      values = _useState2[0],\n      setValues = _useState2[1];\n\n  var _useState3 = useState({\n    latitude: null,\n    longitude: null\n  }),\n      _useState4 = _slicedToArray(_useState3, 2),\n      coordinates = _useState4[0],\n      setCoordinates = _useState4[1];\n\n  var _useState5 = useState({\n    isOpen: false,\n    message: \"\"\n  }),\n      _useState6 = _slicedToArray(_useState5, 2),\n      snackbarOptions = _useState6[0],\n      setSnackbarOptions = _useState6[1];\n\n  var _useState7 = useState(false),\n      _useState8 = _slicedToArray(_useState7, 2),\n      loading = _useState8[0],\n      setLoading = _useState8[1];\n\n  var saveLocation = function saveLocation(pos) {\n    var _pos$coords, _pos$coords2;\n\n    return setCoordinates({\n      latitude: pos === null || pos === void 0 ? void 0 : (_pos$coords = pos.coords) === null || _pos$coords === void 0 ? void 0 : _pos$coords.latitude.toString(),\n      longitude: pos === null || pos === void 0 ? void 0 : (_pos$coords2 = pos.coords) === null || _pos$coords2 === void 0 ? void 0 : _pos$coords2.longitude.toString()\n    });\n  };\n\n  useEffect(function () {\n    if (navigator.geolocation) {\n      navigator.geolocation.getCurrentPosition(saveLocation);\n    }\n  }, []);\n\n  var handleSubmit = function handleSubmit(evt) {\n    evt.preventDefault();\n    setLoading(true);\n\n    var restaurant = _objectSpread({\n      name: \"Restaurante nuevo\"\n    }, coordinates);\n\n    fetch(\"https://ver-la-carta.herokuapp.com/restaurantes/\", {\n      method: \"POST\",\n      body: JSON.stringify(_objectSpread({}, restaurant)),\n      headers: {\n        \"Content-Type\": \"application/json\"\n      }\n    }).then(function (res) {\n      return res.json();\n    }).then(function (json) {\n      fetch(\"https://ver-la-carta.herokuapp.com/usuarios/\", {\n        method: \"POST\",\n        body: JSON.stringify(_objectSpread(_objectSpread({}, values), {}, {\n          restaurantId: json.id\n        })),\n        headers: {\n          \"Content-Type\": \"application/json\"\n        }\n      }).then(function (res) {\n        return res.json();\n      }).then(function (json) {\n        console.log(json);\n        setSnackbarOptions({\n          isOpen: true,\n          message: \"Su usuario se ha creado con exito\"\n        });\n        setLoading(false);\n      });\n    });\n  };\n\n  var handleChange = function handleChange(e) {\n    var _e$target = e.target,\n        id = _e$target.id,\n        value = _e$target.value;\n    setValues(function (prevState) {\n      return _objectSpread(_objectSpread({}, prevState), {}, _defineProperty({}, id, value));\n    });\n  };\n\n  var handleCloseSnackbar = function handleCloseSnackbar() {\n    setSnackbarOptions({\n      isOpen: false,\n      message: \"Su usuario se ha creado con exito: Redirigiendo\"\n    });\n    history.push(ROUTES.LOGIN);\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.container,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 3\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.title,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 4\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 5\n    }\n  }, \" Crear usuario \")), /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: handleSubmit,\n    className: styles.form,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 4\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.input,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    className: styles.label,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 6\n    }\n  }, \"Nombre de usuario:\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    name: \"username\",\n    id: \"username\",\n    onChange: handleChange,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 6\n    }\n  })), /*#__PURE__*/React.createElement(PasswordField, {\n    onChangePassword: handleChange,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 5\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    className: loading ? styles.disabledButton : styles.button,\n    onClick: handleSubmit,\n    disabled: loading,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 5\n    }\n  }, loading ? /*#__PURE__*/React.createElement(CircularProgress, {\n    classes: {\n      root: styles.progress\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 7\n    }\n  }) : \"Crear usuario\"), /*#__PURE__*/React.createElement(Link, {\n    to: ROUTES.LOGIN,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    className: styles.button,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 6\n    }\n  }, \"Iniciar Sesion\"))), /*#__PURE__*/React.createElement(Snackbar, {\n    open: snackbarOptions.isOpen,\n    autoHideDuration: 3000,\n    onClose: handleCloseSnackbar,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 4\n    }\n  }, /*#__PURE__*/React.createElement(Alert, {\n    severity: \"success\",\n    sx: {\n      width: \"100%\"\n    },\n    variant: \"filled\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 5\n    }\n  }, snackbarOptions.message)));\n};\n\nexport default Signup;","map":{"version":3,"sources":["/home/chiara/repos/arquiweb-tp1/react-frontend/src/screens/Signup/index.js"],"names":["React","useEffect","useState","Link","Snackbar","Alert","CircularProgress","ROUTES","PasswordField","styles","Signup","history","username","password","values","setValues","latitude","longitude","coordinates","setCoordinates","isOpen","message","snackbarOptions","setSnackbarOptions","loading","setLoading","saveLocation","pos","coords","toString","navigator","geolocation","getCurrentPosition","handleSubmit","evt","preventDefault","restaurant","name","fetch","method","body","JSON","stringify","headers","then","res","json","restaurantId","id","console","log","handleChange","e","target","value","prevState","handleCloseSnackbar","push","LOGIN","container","title","form","input","label","disabledButton","button","root","progress","width"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { Snackbar, Alert, CircularProgress } from \"@mui/material\";\n\nimport { ROUTES } from \"../../constants/routes\";\nimport PasswordField from \"../../components/PasswordField\";\n\nimport styles from \"./styles.module.scss\";\n\nconst Signup = ({ history }) => {\n\tconst [values, setValues] = useState({\n\t\tusername: \"\",\n\t\tpassword: \"\",\n\t});\n\tconst [coordinates, setCoordinates] = useState({\n\t\tlatitude: null,\n\t\tlongitude: null,\n\t});\n\tconst [snackbarOptions, setSnackbarOptions] = useState({\n\t\tisOpen: false,\n\t\tmessage: \"\",\n\t});\n\tconst [loading, setLoading] = useState(false);\n\n\tconst saveLocation = (pos) =>\n\t\tsetCoordinates({\n\t\t\tlatitude: pos?.coords?.latitude.toString(),\n\t\t\tlongitude: pos?.coords?.longitude.toString(),\n\t\t});\n\n\tuseEffect(() => {\n\t\tif (navigator.geolocation) {\n\t\t\tnavigator.geolocation.getCurrentPosition(saveLocation);\n\t\t}\n\t}, []);\n\n\tconst handleSubmit = (evt) => {\n\t\tevt.preventDefault();\n\t\tsetLoading(true);\n\n\t\tconst restaurant = {\n\t\t\tname: \"Restaurante nuevo\",\n\t\t\t...coordinates,\n\t\t};\n\n\t\tfetch(`https://ver-la-carta.herokuapp.com/restaurantes/`, {\n\t\t\tmethod: \"POST\",\n\t\t\tbody: JSON.stringify({ ...restaurant }),\n\t\t\theaders: {\n\t\t\t\t\"Content-Type\": \"application/json\",\n\t\t\t},\n\t\t})\n\t\t\t.then((res) => res.json())\n\t\t\t.then((json) => {\n\t\t\t\tfetch(`https://ver-la-carta.herokuapp.com/usuarios/`, {\n\t\t\t\t\tmethod: \"POST\",\n\t\t\t\t\tbody: JSON.stringify({ ...values, restaurantId: json.id }),\n\t\t\t\t\theaders: {\n\t\t\t\t\t\t\"Content-Type\": \"application/json\",\n\t\t\t\t\t},\n\t\t\t\t})\n\t\t\t\t\t.then((res) => res.json())\n\t\t\t\t\t.then((json) => {\n\t\t\t\t\t\tconsole.log(json);\n\t\t\t\t\t\tsetSnackbarOptions({\n\t\t\t\t\t\t\tisOpen: true,\n\t\t\t\t\t\t\tmessage: \"Su usuario se ha creado con exito\",\n\t\t\t\t\t\t});\n\t\t\t\t\t\tsetLoading(false);\n\t\t\t\t\t});\n\t\t\t});\n\t};\n\n\tconst handleChange = (e) => {\n\t\tconst { id, value } = e.target;\n\t\tsetValues((prevState) => ({\n\t\t\t...prevState,\n\t\t\t[id]: value,\n\t\t}));\n\t};\n\n\tconst handleCloseSnackbar = () => {\n\t\tsetSnackbarOptions({\n\t\t\tisOpen: false,\n\t\t\tmessage: \"Su usuario se ha creado con exito: Redirigiendo\",\n\t\t});\n\t\thistory.push(ROUTES.LOGIN);\n\t};\n\n\treturn (\n\t\t<div className={styles.container}>\n\t\t\t<div className={styles.title}>\n\t\t\t\t<h1> Crear usuario </h1>\n\t\t\t</div>\n\n\t\t\t<form onSubmit={handleSubmit} className={styles.form}>\n\t\t\t\t<div className={styles.input}>\n\t\t\t\t\t<label className={styles.label}>Nombre de usuario:</label>\n\t\t\t\t\t<input\n\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\tname=\"username\"\n\t\t\t\t\t\tid=\"username\"\n\t\t\t\t\t\tonChange={handleChange}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t\t<PasswordField onChangePassword={handleChange} />\n\n\t\t\t\t<button\n\t\t\t\t\tclassName={loading ? styles.disabledButton : styles.button}\n\t\t\t\t\tonClick={handleSubmit}\n\t\t\t\t\tdisabled={loading}\n\t\t\t\t>\n\t\t\t\t\t{loading ? (\n\t\t\t\t\t\t<CircularProgress classes={{ root: styles.progress }} />\n\t\t\t\t\t) : (\n\t\t\t\t\t\t\"Crear usuario\"\n\t\t\t\t\t)}\n\t\t\t\t</button>\n\n\t\t\t\t<Link to={ROUTES.LOGIN}>\n\t\t\t\t\t<button className={styles.button}>Iniciar Sesion</button>\n\t\t\t\t</Link>\n\t\t\t</form>\n\t\t\t<Snackbar\n\t\t\t\topen={snackbarOptions.isOpen}\n\t\t\t\tautoHideDuration={3000}\n\t\t\t\tonClose={handleCloseSnackbar}\n\t\t\t>\n\t\t\t\t<Alert severity=\"success\" sx={{ width: \"100%\" }} variant=\"filled\">\n\t\t\t\t\t{snackbarOptions.message}\n\t\t\t\t</Alert>\n\t\t\t</Snackbar>\n\t\t</div>\n\t);\n};\n\nexport default Signup;\n"]},"metadata":{},"sourceType":"module"}