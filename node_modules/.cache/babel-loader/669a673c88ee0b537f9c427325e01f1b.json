{"ast":null,"code":"import _slicedToArray from \"/home/chiara/repos/arquiweb-tp1/react-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"/home/chiara/repos/arquiweb-tp1/react-frontend/src/screens/Menu/index.js\";\n\nimport React, { useState, useEffect } from \"react\";\nimport { useParams } from \"react-router\";\nimport styles from \"./styles.module.scss\";\nimport GoBackButton from \"../../components/GoBack\";\nimport { ROUTES } from \"../../constants/routes\";\nimport { Button, Typography } from \"@mui/material\";\nimport { useLocation } from \"react-router-dom\";\n\nvar Menu = function Menu() {\n  var _useState = useState(),\n      _useState2 = _slicedToArray(_useState, 2),\n      restaurantName = _useState2[0],\n      setRestaurantName = _useState2[1];\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      statusError = _useState4[0],\n      setStatusError = _useState4[1];\n\n  var _useState5 = useState(false),\n      _useState6 = _slicedToArray(_useState5, 2),\n      restaurantLoading = _useState6[0],\n      setRestaurantLoading = _useState6[1];\n\n  var _useState7 = useState(),\n      _useState8 = _slicedToArray(_useState7, 2),\n      menu = _useState8[0],\n      setMenu = _useState8[1];\n\n  var _useState9 = useState(false),\n      _useState10 = _slicedToArray(_useState9, 2),\n      menuLoading = _useState10[0],\n      setMenuLoading = _useState10[1];\n\n  var _useParams = useParams(),\n      restaurantId = _useParams.restoId;\n\n  var search = useLocation().search;\n  var tableId = new URLSearchParams(search).get(\"mesa\");\n\n  function showFile(blob) {\n    // It is necessary to create a new blob object with mime-type explicitly set\n    // otherwise only Chrome works like it should\n    var newBlob = new Blob([blob], {\n      type: \"application/pdf\"\n    }); // IE doesn't allow using a blob object directly as link href\n    // instead it is necessary to use msSaveOrOpenBlob\n    // For other browsers:\n    // Create a link pointing to the ObjectURL containing the blob.\n\n    var data = window.URL.createObjectURL(newBlob);\n    var link = document.createElement(\"a\");\n    link.href = data; //link.download=\"file.pdf\";\n    //link.click();\n    //setTimeout(function(){\n    //  // For Firefox it is necessary to delay revoking the ObjectURL\n    //  window.URL.revokeObjectURL(data);\n    //}, 100);\n\n    setMenu(data);\n    setMenuLoading(true);\n  }\n\n  useEffect(function () {\n    fetch(\"https://ver-la-carta.herokuapp.com/restaurantes/\".concat(restaurantId)).then(function (res) {\n      return res.json();\n    }).then(function (json) {\n      if (json.status === 404) {\n        setStatusError(true);\n        setRestaurantName(\"Su restaurante no ha sido encontrado.\");\n      } else {\n        setRestaurantName(json.name);\n        setRestaurantLoading(true);\n      }\n    });\n    fetch(\"https://ver-la-carta.herokuapp.com/carta/\".concat(restaurantId), {\n      responseType: \"blob\"\n    }) //.then(response => response.blob())\n    //.then(file => {\n    //\tCreate a local URL of that file\n    //\tconst fileUrl = URL.createObjectURL(file);\n    //\tconsole.log(file);\n    //\tsetMenu(fileUrl);\n    //\tsetMenuLoading(true);\n    .then(function (response) {\n      return response.blob();\n    }).then(showFile); //.then(response =>{\n    //\tconst file = new Blob([response.data], {type: 'application/pdf'});\n    //\tconst url = URL.createObjectURL(file);\n    //\tsetMenu(url);\n    //\tsetMenuLoading(true);\n    //});\n  }, []);\n  return restaurantLoading ? menuLoading ? /*#__PURE__*/React.createElement(\"div\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 4\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.titleContainer,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Typography, {\n    variant: \"h3\",\n    component: \"h1\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 6\n    }\n  }, restaurantName), /*#__PURE__*/React.createElement(GoBackButton, {\n    route: ROUTES.NEARBY_RESTAURANTS,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 6\n    }\n  })), /*#__PURE__*/React.createElement(Typography, {\n    variant: \"h5\",\n    className: styles.subtitle,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 5\n    }\n  }, \"Menu\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.menuButton,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"object\", {\n    data: menu,\n    type: \"application/pdf\",\n    width: \"60%\",\n    height: \"500px\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 6\n    }\n  }), /*#__PURE__*/React.createElement(Button, {\n    variant: \"text\",\n    href: tableId ? \"/restaurante/\".concat(restaurantId, \"/hacer_pedido?mesa=\").concat(tableId) : \"/restaurante/\".concat(restaurantId, \"/hacer_pedido\"),\n    className: styles.submitButton,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 6\n    }\n  }, \"Hacer pedido\"))) : /*#__PURE__*/React.createElement(\"div\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 4\n    }\n  }, \"recuperando menu del restaurante\") : /*#__PURE__*/React.createElement(\"div\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 3\n    }\n  }, \"Recuperando informaci\\xF3n del restaurante.\");\n};\n\nexport default Menu;","map":{"version":3,"sources":["/home/chiara/repos/arquiweb-tp1/react-frontend/src/screens/Menu/index.js"],"names":["React","useState","useEffect","useParams","styles","GoBackButton","ROUTES","Button","Typography","useLocation","Menu","restaurantName","setRestaurantName","statusError","setStatusError","restaurantLoading","setRestaurantLoading","menu","setMenu","menuLoading","setMenuLoading","restaurantId","restoId","search","tableId","URLSearchParams","get","showFile","blob","newBlob","Blob","type","data","window","URL","createObjectURL","link","document","createElement","href","fetch","then","res","json","status","name","responseType","response","titleContainer","NEARBY_RESTAURANTS","subtitle","menuButton","submitButton"],"mappings":";;;;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,QAA2C,OAA3C;AACA,SAASC,SAAT,QAA0B,cAA1B;AACA,OAAOC,MAAP,MAAmB,sBAAnB;AACA,OAAOC,YAAP,MAAyB,yBAAzB;AACA,SAASC,MAAT,QAAuB,wBAAvB;AACA,SAASC,MAAT,EAAiBC,UAAjB,QAAmC,eAAnC;AACA,SAASC,WAAT,QAA4B,kBAA5B;;AAEA,IAAMC,IAAI,GAAG,SAAPA,IAAO,GAAM;AAClB,kBAA4CT,QAAQ,EAApD;AAAA;AAAA,MAAOU,cAAP;AAAA,MAAuBC,iBAAvB;;AACA,mBAAsCX,QAAQ,CAAC,KAAD,CAA9C;AAAA;AAAA,MAAOY,WAAP;AAAA,MAAoBC,cAApB;;AACA,mBAAkDb,QAAQ,CAAC,KAAD,CAA1D;AAAA;AAAA,MAAOc,iBAAP;AAAA,MAA0BC,oBAA1B;;AACA,mBAAwBf,QAAQ,EAAhC;AAAA;AAAA,MAAOgB,IAAP;AAAA,MAAaC,OAAb;;AACA,mBAAsCjB,QAAQ,CAAC,KAAD,CAA9C;AAAA;AAAA,MAAOkB,WAAP;AAAA,MAAoBC,cAApB;;AAEA,mBAAkCjB,SAAS,EAA3C;AAAA,MAAiBkB,YAAjB,cAAQC,OAAR;;AACA,MAAMC,MAAM,GAAGd,WAAW,GAAGc,MAA7B;AACA,MAAMC,OAAO,GAAG,IAAIC,eAAJ,CAAoBF,MAApB,EAA4BG,GAA5B,CAAgC,MAAhC,CAAhB;;AAEA,WAASC,QAAT,CAAkBC,IAAlB,EAAwB;AACvB;AACA;AACA,QAAIC,OAAO,GAAG,IAAIC,IAAJ,CAAS,CAACF,IAAD,CAAT,EAAiB;AAAEG,MAAAA,IAAI,EAAE;AAAR,KAAjB,CAAd,CAHuB,CAKvB;AACA;AAEA;AACA;;AACA,QAAMC,IAAI,GAAGC,MAAM,CAACC,GAAP,CAAWC,eAAX,CAA2BN,OAA3B,CAAb;AACA,QAAIO,IAAI,GAAGC,QAAQ,CAACC,aAAT,CAAuB,GAAvB,CAAX;AACAF,IAAAA,IAAI,CAACG,IAAL,GAAYP,IAAZ,CAZuB,CAavB;AACA;AACA;AACA;AACA;AACA;;AACAd,IAAAA,OAAO,CAACc,IAAD,CAAP;AACAZ,IAAAA,cAAc,CAAC,IAAD,CAAd;AACA;;AAEDlB,EAAAA,SAAS,CAAC,YAAM;AACfsC,IAAAA,KAAK,2DAAoDnB,YAApD,EAAL,CACEoB,IADF,CACO,UAACC,GAAD;AAAA,aAASA,GAAG,CAACC,IAAJ,EAAT;AAAA,KADP,EAEEF,IAFF,CAEO,UAACE,IAAD,EAAU;AACf,UAAIA,IAAI,CAACC,MAAL,KAAgB,GAApB,EAAyB;AACxB9B,QAAAA,cAAc,CAAC,IAAD,CAAd;AACAF,QAAAA,iBAAiB,CAAC,uCAAD,CAAjB;AACA,OAHD,MAGO;AACNA,QAAAA,iBAAiB,CAAC+B,IAAI,CAACE,IAAN,CAAjB;AACA7B,QAAAA,oBAAoB,CAAC,IAAD,CAApB;AACA;AACF,KAVD;AAWAwB,IAAAA,KAAK,oDAA6CnB,YAA7C,GAA4D;AAACyB,MAAAA,YAAY,EAAE;AAAf,KAA5D,CAAL,CAEA;AACA;AACA;AACA;AACA;AACA;AACA;AARA,KAUCL,IAVD,CAUM,UAAAM,QAAQ;AAAA,aAAIA,QAAQ,CAACnB,IAAT,EAAJ;AAAA,KAVd,EAWCa,IAXD,CAWMd,QAXN,EAZe,CAyBf;AACA;AACA;AACA;AACA;AACA;AACA,GA/BQ,EA+BN,EA/BM,CAAT;AAiCA,SAAOZ,iBAAiB,GACvBI,WAAW,gBACV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACC;AAAK,IAAA,SAAS,EAAEf,MAAM,CAAC4C,cAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACC,oBAAC,UAAD;AAAY,IAAA,OAAO,EAAC,IAApB;AAAyB,IAAA,SAAS,EAAC,IAAnC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACErC,cADF,CADD,eAIC,oBAAC,YAAD;AAAc,IAAA,KAAK,EAAEL,MAAM,CAAC2C,kBAA5B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAJD,CADD,eAOC,oBAAC,UAAD;AAAY,IAAA,OAAO,EAAC,IAApB;AAAyB,IAAA,SAAS,EAAE7C,MAAM,CAAC8C,QAA3C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YAPD,eAUC;AAAK,IAAA,SAAS,EAAE9C,MAAM,CAAC+C,UAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACC;AACC,IAAA,IAAI,EAAElC,IADP;AAEC,IAAA,IAAI,EAAC,iBAFN;AAGC,IAAA,KAAK,EAAC,KAHP;AAIC,IAAA,MAAM,EAAC,OAJR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADD,eAQC,oBAAC,MAAD;AACC,IAAA,OAAO,EAAC,MADT;AAEC,IAAA,IAAI,EACHO,OAAO,0BACYH,YADZ,gCAC8CG,OAD9C,2BAEYH,YAFZ,kBAHT;AAOC,IAAA,SAAS,EAAEjB,MAAM,CAACgD,YAPnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBARD,CAVD,CADU,gBAiCV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wCAlCsB,gBAqCvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mDArCD;AAuCA,CA1GD;;AA4GA,eAAe1C,IAAf","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { useParams } from \"react-router\";\nimport styles from \"./styles.module.scss\";\nimport GoBackButton from \"../../components/GoBack\";\nimport { ROUTES } from \"../../constants/routes\";\nimport { Button, Typography } from \"@mui/material\";\nimport { useLocation } from \"react-router-dom\";\n\nconst Menu = () => {\n\tconst [restaurantName, setRestaurantName] = useState();\n\tconst [statusError, setStatusError] = useState(false);\n\tconst [restaurantLoading, setRestaurantLoading] = useState(false);\n\tconst [menu, setMenu] = useState();\n\tconst [menuLoading, setMenuLoading] = useState(false);\n\n\tconst { restoId: restaurantId } = useParams();\n\tconst search = useLocation().search;\n\tconst tableId = new URLSearchParams(search).get(\"mesa\");\n\n\tfunction showFile(blob) {\n\t\t// It is necessary to create a new blob object with mime-type explicitly set\n\t\t// otherwise only Chrome works like it should\n\t\tvar newBlob = new Blob([blob], { type: \"application/pdf\" });\n\n\t\t// IE doesn't allow using a blob object directly as link href\n\t\t// instead it is necessary to use msSaveOrOpenBlob\n\n\t\t// For other browsers:\n\t\t// Create a link pointing to the ObjectURL containing the blob.\n\t\tconst data = window.URL.createObjectURL(newBlob);\n\t\tvar link = document.createElement(\"a\");\n\t\tlink.href = data;\n\t\t//link.download=\"file.pdf\";\n\t\t//link.click();\n\t\t//setTimeout(function(){\n\t\t//  // For Firefox it is necessary to delay revoking the ObjectURL\n\t\t//  window.URL.revokeObjectURL(data);\n\t\t//}, 100);\n\t\tsetMenu(data);\n\t\tsetMenuLoading(true);\n\t}\n\n\tuseEffect(() => {\n\t\tfetch(`https://ver-la-carta.herokuapp.com/restaurantes/${restaurantId}`)\n\t\t\t.then((res) => res.json())\n\t\t\t.then((json) => {\n\t\t\t\tif (json.status === 404) {\n\t\t\t\t\tsetStatusError(true);\n\t\t\t\t\tsetRestaurantName(\"Su restaurante no ha sido encontrado.\");\n\t\t\t\t} else {\n\t\t\t\t\tsetRestaurantName(json.name);\n\t\t\t\t\tsetRestaurantLoading(true);\n\t\t\t\t}\n\t\t});\n\t\tfetch(`https://ver-la-carta.herokuapp.com/carta/${restaurantId}`,{responseType: \"blob\"})\n\t\t\n\t\t//.then(response => response.blob())\n\t\t//.then(file => {\n\t\t//\tCreate a local URL of that file\n\t\t//\tconst fileUrl = URL.createObjectURL(file);\n\t\t//\tconsole.log(file);\n\t\t//\tsetMenu(fileUrl);\n\t\t//\tsetMenuLoading(true);\n\t\t\n\t\t.then(response => response.blob())\n\t\t.then(showFile)\n\t\t\n\t\t//.then(response =>{\n\t\t//\tconst file = new Blob([response.data], {type: 'application/pdf'});\n\t\t//\tconst url = URL.createObjectURL(file);\n\t\t//\tsetMenu(url);\n\t\t//\tsetMenuLoading(true);\n\t\t//});\n\t}, []);\n\n\treturn restaurantLoading ? (\n\t\tmenuLoading ? (\n\t\t\t<div>\n\t\t\t\t<div className={styles.titleContainer}>\n\t\t\t\t\t<Typography variant=\"h3\" component=\"h1\">\n\t\t\t\t\t\t{restaurantName}\n\t\t\t\t\t</Typography>\n\t\t\t\t\t<GoBackButton route={ROUTES.NEARBY_RESTAURANTS} />\n\t\t\t\t</div>\n\t\t\t\t<Typography variant=\"h5\" className={styles.subtitle}>\n\t\t\t\t\tMenu\n\t\t\t\t</Typography>\n\t\t\t\t<div className={styles.menuButton}>\n\t\t\t\t\t<object\n\t\t\t\t\t\tdata={menu}\n\t\t\t\t\t\ttype=\"application/pdf\"\n\t\t\t\t\t\twidth=\"60%\"\n\t\t\t\t\t\theight=\"500px\"\n\t\t\t\t\t/>\n\n\t\t\t\t\t<Button\n\t\t\t\t\t\tvariant=\"text\"\n\t\t\t\t\t\thref={\n\t\t\t\t\t\t\ttableId\n\t\t\t\t\t\t\t\t? `/restaurante/${restaurantId}/hacer_pedido?mesa=${tableId}`\n\t\t\t\t\t\t\t\t: `/restaurante/${restaurantId}/hacer_pedido`\n\t\t\t\t\t\t}\n\t\t\t\t\t\tclassName={styles.submitButton}\n\t\t\t\t\t>\n\t\t\t\t\t\tHacer pedido\n\t\t\t\t\t</Button>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t) : (\n\t\t\t<div>recuperando menu del restaurante</div>\n\t\t)\n\t) : (\n\t\t<div>Recuperando información del restaurante.</div>\n\t);\n};\n\nexport default Menu;\n"]},"metadata":{},"sourceType":"module"}