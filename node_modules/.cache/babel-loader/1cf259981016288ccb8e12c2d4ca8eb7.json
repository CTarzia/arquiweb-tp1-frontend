{"ast":null,"code":"import _toConsumableArray from\"/home/chiara/repos/arquiweb-tp1/react-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _objectSpread from\"/home/chiara/repos/arquiweb-tp1/react-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/home/chiara/repos/arquiweb-tp1/react-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from\"react\";import{MapContainer,TileLayer,Popup,Marker}from\"react-leaflet\";import{ROUTES}from\"../../constants/routes\";import Topbar from\"../../components/Topbar\";import Restaurant from\"./Restaurant\";import RestaurantInfo from\"./RestaurantInfo\";import styles from\"./styles.module.scss\";var NearbyRestaurants=function NearbyRestaurants(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),restaurantsOne=_useState2[0],setRestaurantsOne=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),restaurantsTwo=_useState4[0],setRestaurantsTwo=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),restaurantsThree=_useState6[0],setRestaurantsThree=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),restaurants=_useState8[0],setRestaurants=_useState8[1];var _useState9=useState(),_useState10=_slicedToArray(_useState9,2),selectedRestaurant=_useState10[0],setSelectedRestaurant=_useState10[1];var _useState11=useState(false),_useState12=_slicedToArray(_useState11,2),isPanelOpen=_useState12[0],setIsPanelOpen=_useState12[1];useEffect(function(){fetch(\"https://ver-la-carta.herokuapp.com/restaurantes/\").then(function(res){console.log(res);if(res.status===200){return res.json();}return{error:\"No se encontraron restaurantes\"};}).then(function(json){if(json.error){console.log(\"error\");}else{setRestaurantsOne(json);}});try{fetch(\"https://arquiweb-tp1.herokuapp.com/api/restaurants\",{}).then(function(res){return res.json();}).catch(function(error){return console.log(error);}).then(function(json){setRestaurantsTwo((json===null||json===void 0?void 0:json.items)||[]);});}catch(_unused){setRestaurantsTwo([]);}try{fetch(\"http://moorfy.com:5000/clients/branches\",{}).then(function(res){return res.json();}).catch(function(error){return console.log(error);}).then(function(json){setRestaurantsThree((json===null||json===void 0?void 0:json.map(function(rest){return _objectSpread(_objectSpread({},rest),{},{appId:3});}))||[]);});}catch(_unused2){setRestaurantsThree([]);}},[]);useEffect(function(){setRestaurants([].concat(_toConsumableArray(restaurantsOne),_toConsumableArray(restaurantsTwo),_toConsumableArray(restaurantsThree)));},[restaurantsOne,restaurantsTwo,restaurantsThree]);var onSelectRestaurant=function onSelectRestaurant(restaurant){setSelectedRestaurant(restaurant);setIsPanelOpen(true);};var closePanel=function closePanel(){return setIsPanelOpen(false);};return/*#__PURE__*/React.createElement(\"div\",{className:styles.container},/*#__PURE__*/React.createElement(Topbar,{returnRoute:ROUTES.HOME,title:\"Restaurantes cercanos\"}),/*#__PURE__*/React.createElement(\"div\",{className:styles.infoContainer},/*#__PURE__*/React.createElement(MapContainer,{className:styles.map,center:[-34.603722,-58.381592],zoom:12,scrollWheelZoom:true},/*#__PURE__*/React.createElement(TileLayer,{url:\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\",attribution:\"\\xA9 <a href=\\\"http://osm.org/copyright\\\">OpenStreetMap</a> contributors\"}),restaurants.map(function(restaurant){return restaurant.latitude&&restaurant.longitude&&/*#__PURE__*/React.createElement(Marker,{position:[parseFloat(restaurant.latitude),parseFloat(restaurant.longitude)]},/*#__PURE__*/React.createElement(Popup,null,/*#__PURE__*/React.createElement(Restaurant,{restaurant:restaurant,handleClick:onSelectRestaurant})));})),selectedRestaurant&&isPanelOpen&&/*#__PURE__*/React.createElement(RestaurantInfo,{restaurant:selectedRestaurant,isOpen:isPanelOpen&&selectedRestaurant,handleClose:closePanel})));};export default NearbyRestaurants;","map":{"version":3,"sources":["/home/chiara/repos/arquiweb-tp1/react-frontend/src/screens/NearbyRestaurants/index.js"],"names":["React","useEffect","useState","MapContainer","TileLayer","Popup","Marker","ROUTES","Topbar","Restaurant","RestaurantInfo","styles","NearbyRestaurants","restaurantsOne","setRestaurantsOne","restaurantsTwo","setRestaurantsTwo","restaurantsThree","setRestaurantsThree","restaurants","setRestaurants","selectedRestaurant","setSelectedRestaurant","isPanelOpen","setIsPanelOpen","fetch","then","res","console","log","status","json","error","catch","items","map","rest","appId","onSelectRestaurant","restaurant","closePanel","container","HOME","infoContainer","latitude","longitude","parseFloat"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { MapContainer, TileLayer, Popup, Marker } from \"react-leaflet\";\n\nimport { ROUTES } from \"../../constants/routes\";\nimport Topbar from \"../../components/Topbar\";\n\nimport Restaurant from \"./Restaurant\";\nimport RestaurantInfo from \"./RestaurantInfo\";\nimport styles from \"./styles.module.scss\";\n\nconst NearbyRestaurants = () => {\n\tconst [restaurantsOne, setRestaurantsOne] = useState([]);\n\tconst [restaurantsTwo, setRestaurantsTwo] = useState([]);\n\tconst [restaurantsThree, setRestaurantsThree] = useState([]);\n\tconst [restaurants, setRestaurants] = useState([]);\n\tconst [selectedRestaurant, setSelectedRestaurant] = useState();\n\tconst [isPanelOpen, setIsPanelOpen] = useState(false);\n\n\tuseEffect(() => {\n\t\tfetch(\"https://ver-la-carta.herokuapp.com/restaurantes/\")\n\t\t\t.then((res) => {\n\t\t\t\tconsole.log(res);\n\t\t\t\tif (res.status === 200) {\n\t\t\t\t\treturn res.json();\n\t\t\t\t}\n\t\t\t\treturn { error: \"No se encontraron restaurantes\" };\n\t\t\t})\n\t\t\t.then((json) => {\n\t\t\t\tif (json.error) {\n\t\t\t\t\tconsole.log(\"error\");\n\t\t\t\t} else {\n\t\t\t\t\tsetRestaurantsOne(json);\n\t\t\t\t}\n\t\t\t});\n\t\ttry {\n\t\t\tfetch(\"https://arquiweb-tp1.herokuapp.com/api/restaurants\", {})\n\t\t\t\t.then((res) => res.json())\n\t\t\t\t.catch((error) => console.log(error))\n\t\t\t\t.then((json) => {\n\t\t\t\t\tsetRestaurantsTwo(json?.items || []);\n\t\t\t\t});\n\t\t} catch {\n\t\t\tsetRestaurantsTwo([]);\n\t\t}\n\t\ttry {\n\t\t\tfetch(\"http://moorfy.com:5000/clients/branches\", {})\n\t\t\t\t.then((res) => res.json())\n\t\t\t\t.catch((error) => console.log(error))\n\t\t\t\t.then((json) => {\n\t\t\t\t\tsetRestaurantsThree(json?.map((rest) => ({ ...rest, appId: 3 })) || []);\n\t\t\t\t});\n\t\t} catch {\n\t\t\tsetRestaurantsThree([]);\n\t\t}\n\t}, []);\n\n\tuseEffect(() => {\n\t\tsetRestaurants([...restaurantsOne, ...restaurantsTwo, ...restaurantsThree]);\n\t}, [restaurantsOne, restaurantsTwo, restaurantsThree]);\n\n\tconst onSelectRestaurant = (restaurant) => {\n\t\tsetSelectedRestaurant(restaurant);\n\t\tsetIsPanelOpen(true);\n\t};\n\n\tconst closePanel = () => setIsPanelOpen(false);\n\t\n\treturn (\n\t\t<div className={styles.container}>\n\t\t\t<Topbar returnRoute={ROUTES.HOME} title=\"Restaurantes cercanos\" />\n\t\t\t<div className={styles.infoContainer}>\n\t\t\t\t<MapContainer\n\t\t\t\t\tclassName={styles.map}\n\t\t\t\t\tcenter={[-34.603722, -58.381592]}\n\t\t\t\t\tzoom={12}\n\t\t\t\t\tscrollWheelZoom\n\t\t\t\t>\n\t\t\t\t\t<TileLayer\n\t\t\t\t\t\turl=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\n\t\t\t\t\t\tattribution='&copy; <a href=\"http://osm.org/copyright\">OpenStreetMap</a> contributors'\n\t\t\t\t\t/>\n\t\t\t\t\t{restaurants.map(\n\t\t\t\t\t\t(restaurant) =>\n\t\t\t\t\t\t\trestaurant.latitude &&\n\t\t\t\t\t\t\trestaurant.longitude && (\n\t\t\t\t\t\t\t\t<Marker\n\t\t\t\t\t\t\t\t\tposition={[\n\t\t\t\t\t\t\t\t\t\tparseFloat(restaurant.latitude),\n\t\t\t\t\t\t\t\t\t\tparseFloat(restaurant.longitude),\n\t\t\t\t\t\t\t\t\t]}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<Popup>\n\t\t\t\t\t\t\t\t\t\t<Restaurant\n\t\t\t\t\t\t\t\t\t\t\trestaurant={restaurant}\n\t\t\t\t\t\t\t\t\t\t\thandleClick={onSelectRestaurant}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</Popup>\n\t\t\t\t\t\t\t\t</Marker>\n\t\t\t\t\t\t\t)\n\t\t\t\t\t)}\n\t\t\t\t</MapContainer>\n\t\t\t\t{selectedRestaurant && isPanelOpen && (\n\t\t\t\t\t<RestaurantInfo\n\t\t\t\t\t\trestaurant={selectedRestaurant}\n\t\t\t\t\t\tisOpen={isPanelOpen && selectedRestaurant}\n\t\t\t\t\t\thandleClose={closePanel}\n\t\t\t\t\t/>\n\t\t\t\t)}\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n\nexport default NearbyRestaurants;\n"]},"metadata":{},"sourceType":"module"}