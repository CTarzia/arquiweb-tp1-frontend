{"ast":null,"code":"import _objectSpread from \"/home/chiara/repos/arquiweb-tp1/react-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nimport _slicedToArray from \"/home/chiara/repos/arquiweb-tp1/react-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"/home/chiara/repos/arquiweb-tp1/react-frontend/src/screens/OrderManagement/index.js\";\n\nimport React, { useContext, useEffect, useState, useMemo } from \"react\";\nimport RemoveRedEyeIcon from \"@mui/icons-material/RemoveRedEye\";\nimport DeleteForeverIcon from \"@mui/icons-material/DeleteForever\";\nimport CheckCircleIcon from \"@mui/icons-material/CheckCircle\";\nimport PublicTopbar from \"../../components/PublicTopbar\";\nimport { UserContext } from \"../../context\";\nimport { ROUTES } from \"../../constants/routes\";\nimport styles from \"./styles.module.scss\";\n\nvar OrderManagement = function OrderManagement(_ref) {\n  var history = _ref.history;\n\n  var _useContext = useContext(UserContext),\n      userId = _useContext.userId,\n      restaurantId = _useContext.restaurantId,\n      restaurant = _useContext.restaurant;\n\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      orders = _useState2[0],\n      setOrders = _useState2[1];\n\n  useEffect(function () {\n    if (!userId || !restaurantId) {\n      history.push(ROUTES.LOGIN);\n    } else {\n      fetch(\"https://ver-la-carta.herokuapp.com/restaurantes/\".concat(restaurantId, \"/pedidos\")).then(function (response) {\n        return response.json();\n      }).then(function (json) {\n        setOrders(json);\n      });\n    }\n  }, []);\n  var pendingOrders = useMemo(function () {\n    return orders.filter(function (order) {\n      return order.status === \"PENDING\";\n    });\n  }, [orders]);\n  var progressOrders = useMemo(function () {\n    return orders.filter(function (order) {\n      return order.status === \"PROGRESS\";\n    });\n  }, [orders]);\n  var readyOrders = useMemo(function () {\n    return orders.filter(function (order) {\n      return order.status === \"READY\";\n    });\n  }, [orders]);\n  console.log(orders);\n\n  var viewOrder = function viewOrder(order) {\n    return window.alert(\"Pedido: \".concat(order.content, \"\\n\").concat(order.type === \"PICKUP\" ? \"nombre: \".concat(order.clientName) : \"\"));\n  };\n\n  var deleteOrder = function deleteOrder(order) {\n    fetch(\"https://ver-la-carta.herokuapp.com/orders/\".concat(order.orderId), {\n      method: \"DELETE\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      }\n    }).then(function () {\n      fetch(\"https://ver-la-carta.herokuapp.com/restaurantes/\".concat(restaurantId, \"/pedidos\")).then(function (response) {\n        return response.json();\n      }).then(function (json) {\n        setOrders(json);\n      });\n    });\n  };\n\n  var updateOrder = function updateOrder(order, newStatus) {\n    fetch(\"https://ver-la-carta.herokuapp.com/orders/\".concat(order.orderId), {\n      method: \"PUT\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify(_objectSpread(_objectSpread({}, order), {}, {\n        status: newStatus\n      }))\n    }).then(function () {\n      fetch(\"https://ver-la-carta.herokuapp.com/restaurantes/\".concat(restaurantId, \"/pedidos\")).then(function (response) {\n        return response.json();\n      }).then(function (json) {\n        setOrders(json);\n      });\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.container,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 3\n    }\n  }, /*#__PURE__*/React.createElement(PublicTopbar, {\n    title: \"Gestionar: \".concat(restaurant.name),\n    history: history,\n    withGoBack: true,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 4\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.content,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 4\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.ordersContainer,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: styles.title,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 6\n    }\n  }, \" Pendientes \"), pendingOrders.map(function (order) {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.orderCard,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 8\n      }\n    }, order.type === \"TABLE\" ? \"Mesa: \".concat(order.tableNumber) : \"Pickup: \".concat(order.orderId)), /*#__PURE__*/React.createElement(\"button\", {\n      className: styles.viewContentButton,\n      onClick: function onClick() {\n        return viewOrder(order);\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 8\n      }\n    }, /*#__PURE__*/React.createElement(RemoveRedEyeIcon, {\n      className: styles.icon,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 9\n      }\n    })), /*#__PURE__*/React.createElement(\"button\", {\n      className: styles.deleteButton,\n      onClick: function onClick() {\n        return updateOrder(order, \"DENIED\");\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 8\n      }\n    }, /*#__PURE__*/React.createElement(DeleteForeverIcon, {\n      className: styles.icon,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 9\n      }\n    })), /*#__PURE__*/React.createElement(\"button\", {\n      className: styles.acceptButton,\n      onClick: function onClick() {\n        return updateOrder(order, \"PROGRESS\");\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 8\n      }\n    }, /*#__PURE__*/React.createElement(CheckCircleIcon, {\n      className: styles.icon,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 9\n      }\n    })));\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.ordersContainer,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: styles.title,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 6\n    }\n  }, \" En curso \"), progressOrders.map(function (order) {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.orderCard,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 8\n      }\n    }, order.type === \"TABLE\" ? \"Mesa: \".concat(order.tableNumber) : \"Pickup: \".concat(order.orderId)), /*#__PURE__*/React.createElement(\"button\", {\n      className: styles.viewContentButton,\n      onClick: function onClick() {\n        return viewOrder(order);\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 8\n      }\n    }, /*#__PURE__*/React.createElement(RemoveRedEyeIcon, {\n      className: styles.icon,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 9\n      }\n    })), /*#__PURE__*/React.createElement(\"button\", {\n      className: styles.acceptButton,\n      onClick: function onClick() {\n        return updateOrder(order, \"READY\");\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 8\n      }\n    }, /*#__PURE__*/React.createElement(CheckCircleIcon, {\n      className: styles.icon,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 9\n      }\n    })));\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.ordersContainer,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: styles.title,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 6\n    }\n  }, \" Listo \"), readyOrders.map(function (order) {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.orderCard,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 8\n      }\n    }, order.type === \"TABLE\" ? \"Mesa: \".concat(order.tableNumber) : \"Pickup: \".concat(order.orderId)), /*#__PURE__*/React.createElement(\"button\", {\n      className: styles.viewContentButton,\n      onClick: function onClick() {\n        return viewOrder(order);\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 8\n      }\n    }, /*#__PURE__*/React.createElement(RemoveRedEyeIcon, {\n      className: styles.icon,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 9\n      }\n    })), /*#__PURE__*/React.createElement(\"button\", {\n      className: styles.acceptButton,\n      onClick: function onClick() {\n        return deleteOrder(order);\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 8\n      }\n    }, /*#__PURE__*/React.createElement(CheckCircleIcon, {\n      className: styles.icon,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168,\n        columnNumber: 9\n      }\n    })));\n  }))));\n};\n\nexport default OrderManagement;","map":{"version":3,"sources":["/home/chiara/repos/arquiweb-tp1/react-frontend/src/screens/OrderManagement/index.js"],"names":["React","useContext","useEffect","useState","useMemo","RemoveRedEyeIcon","DeleteForeverIcon","CheckCircleIcon","PublicTopbar","UserContext","ROUTES","styles","OrderManagement","history","userId","restaurantId","restaurant","orders","setOrders","push","LOGIN","fetch","then","response","json","pendingOrders","filter","order","status","progressOrders","readyOrders","console","log","viewOrder","window","alert","content","type","clientName","deleteOrder","orderId","method","headers","updateOrder","newStatus","body","JSON","stringify","container","name","ordersContainer","title","map","orderCard","tableNumber","viewContentButton","icon","deleteButton","acceptButton"],"mappings":"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","sourcesContent":["import React, { useContext, useEffect, useState, useMemo } from \"react\";\nimport RemoveRedEyeIcon from \"@mui/icons-material/RemoveRedEye\";\nimport DeleteForeverIcon from \"@mui/icons-material/DeleteForever\";\nimport CheckCircleIcon from \"@mui/icons-material/CheckCircle\";\n\nimport PublicTopbar from \"../../components/PublicTopbar\";\nimport { UserContext } from \"../../context\";\nimport { ROUTES } from \"../../constants/routes\";\n\nimport styles from \"./styles.module.scss\";\n\nconst OrderManagement = ({ history }) => {\n\tconst { userId, restaurantId, restaurant } = useContext(UserContext);\n\tconst [orders, setOrders] = useState([]);\n\n\tuseEffect(() => {\n\t\tif (!userId || !restaurantId) {\n\t\t\thistory.push(ROUTES.LOGIN);\n\t\t} else {\n\t\t\tfetch(\n\t\t\t\t`https://ver-la-carta.herokuapp.com/restaurantes/${restaurantId}/pedidos`\n\t\t\t)\n\t\t\t\t.then((response) => response.json())\n\t\t\t\t.then((json) => {\n\t\t\t\t\tsetOrders(json);\n\t\t\t\t});\n\t\t}\n\t}, []);\n\n\tconst pendingOrders = useMemo(\n\t\t() => orders.filter((order) => order.status === \"PENDING\"),\n\t\t[orders]\n\t);\n\tconst progressOrders = useMemo(\n\t\t() => orders.filter((order) => order.status === \"PROGRESS\"),\n\t\t[orders]\n\t);\n\tconst readyOrders = useMemo(\n\t\t() => orders.filter((order) => order.status === \"READY\"),\n\t\t[orders]\n\t);\n\n\tconsole.log(orders);\n\n\tconst viewOrder = (order) =>\n\t\twindow.alert(\n\t\t\t`Pedido: ${order.content}\\n${\n\t\t\t\torder.type === \"PICKUP\" ? `nombre: ${order.clientName}` : \"\"\n\t\t\t}`\n\t\t);\n\n\tconst deleteOrder = (order) => {\n\t\tfetch(`https://ver-la-carta.herokuapp.com/orders/${order.orderId}`, {\n\t\t\tmethod: \"DELETE\",\n\t\t\theaders: {\n\t\t\t\t\"Content-Type\": \"application/json\",\n\t\t\t},\n\t\t}).then(() => {\n\t\t\tfetch(\n\t\t\t\t`https://ver-la-carta.herokuapp.com/restaurantes/${restaurantId}/pedidos`\n\t\t\t)\n\t\t\t\t.then((response) => response.json())\n\t\t\t\t.then((json) => {\n\t\t\t\t\tsetOrders(json);\n\t\t\t\t});\n\t\t});\n\t};\n\n\tconst updateOrder = (order, newStatus) => {\n\t\tfetch(`https://ver-la-carta.herokuapp.com/orders/${order.orderId}`, {\n\t\t\tmethod: \"PUT\",\n\t\t\theaders: {\n\t\t\t\t\"Content-Type\": \"application/json\",\n\t\t\t},\n\t\t\tbody: JSON.stringify({ ...order, status: newStatus }),\n\t\t}).then(() => {\n\t\t\tfetch(\n\t\t\t\t`https://ver-la-carta.herokuapp.com/restaurantes/${restaurantId}/pedidos`\n\t\t\t)\n\t\t\t\t.then((response) => response.json())\n\t\t\t\t.then((json) => {\n\t\t\t\t\tsetOrders(json);\n\t\t\t\t});\n\t\t});\n\t};\n\n\treturn (\n\t\t<div className={styles.container}>\n\t\t\t<PublicTopbar\n\t\t\t\ttitle={`Gestionar: ${restaurant.name}`}\n\t\t\t\thistory={history}\n\t\t\t\twithGoBack\n\t\t\t/>\n\t\t\t<div className={styles.content}>\n\t\t\t\t<div className={styles.ordersContainer}>\n\t\t\t\t\t<span className={styles.title}> Pendientes </span>\n\t\t\t\t\t{pendingOrders.map((order) => (\n\t\t\t\t\t\t<div className={styles.orderCard}>\n\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t{order.type === \"TABLE\"\n\t\t\t\t\t\t\t\t\t? `Mesa: ${order.tableNumber}`\n\t\t\t\t\t\t\t\t\t: `Pickup: ${order.orderId}`}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tclassName={styles.viewContentButton}\n\t\t\t\t\t\t\t\tonClick={() => viewOrder(order)}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<RemoveRedEyeIcon className={styles.icon} />\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tclassName={styles.deleteButton}\n\t\t\t\t\t\t\t\tonClick={() => updateOrder(order, \"DENIED\")}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<DeleteForeverIcon className={styles.icon} />\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tclassName={styles.acceptButton}\n\t\t\t\t\t\t\t\tonClick={() => updateOrder(order, \"PROGRESS\")}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<CheckCircleIcon className={styles.icon} />\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t))}\n\t\t\t\t</div>\n\t\t\t\t<div className={styles.ordersContainer}>\n\t\t\t\t\t<span className={styles.title}> En curso </span>\n\t\t\t\t\t{progressOrders.map((order) => (\n\t\t\t\t\t\t<div className={styles.orderCard}>\n\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t{order.type === \"TABLE\"\n\t\t\t\t\t\t\t\t\t? `Mesa: ${order.tableNumber}`\n\t\t\t\t\t\t\t\t\t: `Pickup: ${order.orderId}`}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tclassName={styles.viewContentButton}\n\t\t\t\t\t\t\t\tonClick={() => viewOrder(order)}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<RemoveRedEyeIcon className={styles.icon} />\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tclassName={styles.acceptButton}\n\t\t\t\t\t\t\t\tonClick={() => updateOrder(order, \"READY\")}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<CheckCircleIcon className={styles.icon} />\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t))}\n\t\t\t\t</div>\n\t\t\t\t<div className={styles.ordersContainer}>\n\t\t\t\t\t<span className={styles.title}> Listo </span>\n\t\t\t\t\t{readyOrders.map((order) => (\n\t\t\t\t\t\t<div className={styles.orderCard}>\n\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t{order.type === \"TABLE\"\n\t\t\t\t\t\t\t\t\t? `Mesa: ${order.tableNumber}`\n\t\t\t\t\t\t\t\t\t: `Pickup: ${order.orderId}`}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tclassName={styles.viewContentButton}\n\t\t\t\t\t\t\t\tonClick={() => viewOrder(order)}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<RemoveRedEyeIcon className={styles.icon} />\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tclassName={styles.acceptButton}\n\t\t\t\t\t\t\t\tonClick={() => deleteOrder(order)}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<CheckCircleIcon className={styles.icon} />\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t))}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n\nexport default OrderManagement;\n"]},"metadata":{},"sourceType":"module"}