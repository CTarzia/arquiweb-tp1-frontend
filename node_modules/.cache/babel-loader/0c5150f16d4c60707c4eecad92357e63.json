{"ast":null,"code":"import _defineProperty from\"/home/chiara/repos/arquiweb-tp1/react-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/home/chiara/repos/arquiweb-tp1/react-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/home/chiara/repos/arquiweb-tp1/react-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import{useParams}from\"react-router\";import{useLocation}from\"react-router-dom\";import Topbar from\"../../components/Topbar\";import{ROUTES}from\"../../constants/routes\";import styles from\"./styles.module.scss\";import PostOrder from\"./components/PostOrder\";var CreateOrder=function CreateOrder(){var _useState=useState({}),_useState2=_slicedToArray(_useState,2),order=_useState2[0],setOrder=_useState2[1];var _useParams=useParams(),restaurantId=_useParams.id;var search=useLocation().search;var tableNumber=new URLSearchParams(search).get(\"mesa\");var restaurantName=new URLSearchParams(search).get(\"name\");var appId=parseInt(new URLSearchParams(search).get(\"appId\"));var handleOnInputChange=function handleOnInputChange(evt){setOrder(_objectSpread(_objectSpread({},order),{},_defineProperty({},evt.target.name,evt.target.value)));};var handleSubmit=function handleSubmit(evt){evt.preventDefault();var type=tableNumber?\"table\":\"pickup\";var orderToSend=order;if(tableNumber){orderToSend=_objectSpread(_objectSpread({},order),{},{tableNumber:tableNumber});}switch(appId){case 1:fetch(\"https://ver-la-carta.herokuapp.com/orders/\".concat(type,\"/\").concat(restaurantId),{method:\"POST\",body:JSON.stringify(_objectSpread({},orderToSend)),headers:{\"Content-Type\":\"application/json\"}}).then(function(res){return res.json();}).then(function(json){if(tableNumber){window.alert(\"Su pedido ha sido enviado.\");}else{window.alert(\"Su pedido ha sido enviado. Su n\\xFAmero de pedido es: 1-\".concat(restaurantId,\"-\").concat(json.orderId,\". \"));}});break;case 2:fetch(\"https://arquiweb-tp1.herokuapp.com/api/restaurants/\".concat(restaurantId,\"/orders/new\"),{method:\"POST\",body:JSON.stringify({order_text:orderToSend.content,table_id:0}),headers:{\"Content-Type\":\"application/json\"}}).then(function(res){return res.json();}).then(function(json){window.alert(\"Su pedido ha sido enviado. Su n\\xFAmero de pedido es: 2-\".concat(restaurantId,\"-\").concat(json.order_id,\".\"));});break;default:fetch(\"http://moorfy.com:5000/clients/place_an_order?branch_id=\".concat(restaurantId,\"&table_id=0&user_id=0&order_content=\").concat(orderToSend.content)).then(function(res){return res.json();}).then(function(json){window.alert(\"Su pedido ha sido enviado. Su n\\xFAmero de pedido es: 3-\".concat(restaurantId,\"-\").concat(json[\"orden id\"],\".\"));});break;}};return/*#__PURE__*/React.createElement(\"div\",{className:styles.container},/*#__PURE__*/React.createElement(Topbar,{returnRoute:ROUTES.NEARBY_RESTAURANTS,title:\"Hacer Pedido\"}),/*#__PURE__*/React.createElement(PostOrder,{handleSubmit:handleSubmit,handleOnInputChange:handleOnInputChange,tableNumber:tableNumber}));};export default CreateOrder;","map":{"version":3,"sources":["/home/chiara/repos/arquiweb-tp1/react-frontend/src/screens/CreateOrder/index.js"],"names":["React","useState","useEffect","useParams","useLocation","Topbar","ROUTES","styles","PostOrder","CreateOrder","order","setOrder","restaurantId","id","search","tableNumber","URLSearchParams","get","restaurantName","appId","parseInt","handleOnInputChange","evt","target","name","value","handleSubmit","preventDefault","type","orderToSend","fetch","method","body","JSON","stringify","headers","then","res","json","window","alert","orderId","order_text","content","table_id","order_id","container","NEARBY_RESTAURANTS"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { useParams } from \"react-router\";\nimport { useLocation } from \"react-router-dom\";\n\nimport Topbar from \"../../components/Topbar\";\nimport { ROUTES } from \"../../constants/routes\";\n\nimport styles from \"./styles.module.scss\";\nimport PostOrder from \"./components/PostOrder\";\n\nconst CreateOrder = () => {\n\tconst [order, setOrder] = useState({});\n\n\tconst { id: restaurantId } = useParams();\n\tconst search = useLocation().search;\n\tconst tableNumber = new URLSearchParams(search).get(\"mesa\");\n\tconst restaurantName = new URLSearchParams(search).get(\"name\");\n\tconst appId = parseInt(new URLSearchParams(search).get(\"appId\"));\n\n\tconst handleOnInputChange = (evt) => {\n\t\tsetOrder({ ...order, [evt.target.name]: evt.target.value });\n\t};\n\n\tconst handleSubmit = (evt) => {\n\t\tevt.preventDefault();\n\n\t\tconst type = tableNumber ? \"table\" : \"pickup\";\n\t\tlet orderToSend = order;\n\t\tif (tableNumber) {\n\t\t\torderToSend = { ...order, tableNumber };\n\t\t}\n\n\t\tswitch (appId) {\n\t\t\tcase 1:\n\t\t\t\tfetch(\n\t\t\t\t\t`https://ver-la-carta.herokuapp.com/orders/${type}/${restaurantId}`,\n\t\t\t\t\t{\n\t\t\t\t\t\tmethod: \"POST\",\n\t\t\t\t\t\tbody: JSON.stringify({ ...orderToSend }),\n\t\t\t\t\t\theaders: {\n\t\t\t\t\t\t\t\"Content-Type\": \"application/json\",\n\t\t\t\t\t\t},\n\t\t\t\t\t}\n\t\t\t\t)\n\t\t\t\t\t.then((res) => res.json())\n\t\t\t\t\t.then((json) => {\n\t\t\t\t\t\tif (tableNumber) {\n\t\t\t\t\t\t\twindow.alert(`Su pedido ha sido enviado.`);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\twindow.alert(\n\t\t\t\t\t\t\t\t`Su pedido ha sido enviado. Su número de pedido es: 1-${restaurantId}-${json.orderId}. `\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\tbreak;\n\t\t\tcase 2:\n\t\t\t\tfetch(\n\t\t\t\t\t`https://arquiweb-tp1.herokuapp.com/api/restaurants/${restaurantId}/orders/new`,\n\t\t\t\t\t{\n\t\t\t\t\t\tmethod: \"POST\",\n\t\t\t\t\t\tbody: JSON.stringify({\n\t\t\t\t\t\t\torder_text: orderToSend.content,\n\t\t\t\t\t\t\ttable_id: 0,\n\t\t\t\t\t\t}),\n\t\t\t\t\t\theaders: {\n\t\t\t\t\t\t\t\"Content-Type\": \"application/json\",\n\t\t\t\t\t\t},\n\t\t\t\t\t}\n\t\t\t\t)\n\t\t\t\t\t.then((res) => res.json())\n\t\t\t\t\t.then((json) => {\n\t\t\t\t\t\twindow.alert(\n\t\t\t\t\t\t\t`Su pedido ha sido enviado. Su número de pedido es: 2-${restaurantId}-${json.order_id}.`\n\t\t\t\t\t\t);\n\t\t\t\t\t});\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tfetch(\n\t\t\t\t\t`http://moorfy.com:5000/clients/place_an_order?branch_id=${restaurantId}&table_id=0&user_id=0&order_content=${orderToSend.content}`\n\t\t\t\t)\n\t\t\t\t\t.then((res) => res.json())\n\t\t\t\t\t.then((json) => {\n\t\t\t\t\t\twindow.alert(\n\t\t\t\t\t\t\t`Su pedido ha sido enviado. Su número de pedido es: 3-${restaurantId}-${json[\"orden id\"]}.`\n\t\t\t\t\t\t);\n\t\t\t\t\t});\n\t\t\t\tbreak;\n\t\t}\n\t};\n\n\treturn (\n\t\t<div className={styles.container}>\n\t\t\t<Topbar returnRoute={ROUTES.NEARBY_RESTAURANTS} title={`Hacer Pedido`} />\n\t\t\t<PostOrder\n\t\t\t\thandleSubmit={handleSubmit}\n\t\t\t\thandleOnInputChange={handleOnInputChange}\n\t\t\t\ttableNumber={tableNumber}\n\t\t\t/>\n\t\t</div>\n\t);\n};\nexport default CreateOrder;\n"]},"metadata":{},"sourceType":"module"}