{"ast":null,"code":"import _slicedToArray from\"/home/chiara/repos/arquiweb-tp1/react-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import{useParams}from\"react-router\";import GoBackButton from\"../../components/GoBack\";import{ROUTES}from\"../../constants/routes\";import styles from\"./styles.module.scss\";import{Button,ButtonGroup,Typography}from\"@mui/material\";var WelcomeTable=function WelcomeTable(){var _useState=useState(),_useState2=_slicedToArray(_useState,2),restaurantName=_useState2[0],setRestaurantName=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),table=_useState4[0],setTable=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),statusError=_useState6[0],setStatusError=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),restaurantLoading=_useState8[0],setRestaurantLoading=_useState8[1];var _useState9=useState(),_useState10=_slicedToArray(_useState9,2),color=_useState10[0],setColor=_useState10[1];var _useParams=useParams(),restaurantId=_useParams.restoId;var _useParams2=useParams(),tableId=_useParams2.tableId;useEffect(function(){fetch(\"https://ver-la-carta.herokuapp.com/restaurantes/\".concat(restaurantId)).then(function(res){return res.json();}).then(function(json){if(json.status===404){setStatusError(true);setRestaurantName(\"Su restaurante no ha sido encontrado.\");}else{setRestaurantName(json.name);setRestaurantLoading(true);}});fetch(\"https://ver-la-carta.herokuapp.com/mesas/\".concat(restaurantId,\"/\").concat(tableId)).then(function(res){return res.json();}).then(function(json){if(json.status===404){setStatusError(true);setRestaurantName(\"Su mesa no ha sido encontrado.\");}else{setTable(json);setRestaurantLoading(true);setColor(!json.calling_server);}});},[]);var handleMozo=function handleMozo(){fetch(\"https://ver-la-carta.herokuapp.com/mesas/\".concat(restaurantId,\"/\").concat(tableId,\"/server\"),{method:\"PUT\",body:JSON.stringify({}),headers:{\"Content-Type\":\"application/json\"}}).then(function(res){return res.json();}).then(function(json){setTable(json);setColor(table.calling_server);if(color===true){window.alert(\"mozo llamado\");}else{window.alert(\"mozo liberado\");}});};return restaurantLoading?/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"div\",{className:styles.titleContainer},/*#__PURE__*/React.createElement(Typography,{variant:\"h3\",component:\"h1\"},restaurantName),/*#__PURE__*/React.createElement(GoBackButton,{route:ROUTES.HOME})),/*#__PURE__*/React.createElement(Typography,{variant:\"h5\",className:styles.subtitle},\"Mesa \",tableId),/*#__PURE__*/React.createElement(\"div\",{className:styles.displayButtonsColumn},/*#__PURE__*/React.createElement(ButtonGroup,{orientation:\"vertical\",align:\"center\"},/*#__PURE__*/React.createElement(Button,{variant:\"text\",href:\"/menu/\".concat(restaurantId,\"?mesa=\").concat(tableId)},\"Ver carta\"),/*#__PURE__*/React.createElement(Button,{color:\"primary\",variant:\"text\",href:\"/restaurante/\".concat(restaurantId,\"/hacer_pedido?mesa=\").concat(tableId)},\"Hacer pedido\"),/*#__PURE__*/React.createElement(Button,{onClick:handleMozo,color:color?\"primary\":\"secondary\",variant:color?\"text\":\"contained\"},color?\"LLamar mozo\":\"Liberar mozo\")))):/*#__PURE__*/React.createElement(\"p\",null,\"Recuperando informaci\\xF3n del restaurante.\");};export default WelcomeTable;","map":{"version":3,"sources":["/home/chiara/repos/arquiweb-tp1/react-frontend/src/screens/WelcomeTable/index.js"],"names":["React","useState","useEffect","useParams","GoBackButton","ROUTES","styles","Button","ButtonGroup","Typography","WelcomeTable","restaurantName","setRestaurantName","table","setTable","statusError","setStatusError","restaurantLoading","setRestaurantLoading","color","setColor","restaurantId","restoId","tableId","fetch","then","res","json","status","name","calling_server","handleMozo","method","body","JSON","stringify","headers","window","alert","titleContainer","HOME","subtitle","displayButtonsColumn"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { useParams } from \"react-router\";\n\nimport GoBackButton from \"../../components/GoBack\";\nimport { ROUTES } from \"../../constants/routes\";\nimport styles from \"./styles.module.scss\";\nimport { Button, ButtonGroup, Typography} from \"@mui/material\";\n\n\nconst WelcomeTable = () => {\n\tconst [restaurantName, setRestaurantName] = useState();\n    const [table, setTable] = useState();\n\tconst [statusError, setStatusError] = useState(false);\n\tconst [restaurantLoading, setRestaurantLoading] = useState(false);\n    const [color, setColor] = useState()\n\n\tconst { restoId: restaurantId} = useParams();\n    const { tableId} = useParams();\n\n\n\tuseEffect(() => {\n\t\tfetch(`https://ver-la-carta.herokuapp.com/restaurantes/${restaurantId}`)\n\t\t\t.then((res) => res.json())\n\t\t\t.then((json) => {\n\t\t\t\tif (json.status === 404) {\n\t\t\t\t\tsetStatusError(true);\n\t\t\t\t\tsetRestaurantName(\"Su restaurante no ha sido encontrado.\");\n\t\t\t\t} else {\n\t\t\t\t\tsetRestaurantName(json.name);\n\t\t\t\t\tsetRestaurantLoading(true)\n\t\t\t\t}\n\t\t\t});\n\t\tfetch(`https://ver-la-carta.herokuapp.com/mesas/${restaurantId}/${tableId}`)\n\t\t\t.then((res) => res.json())\n\t\t\t.then((json) => {\n\t\t\t\tif (json.status === 404) {\n\t\t\t\t\tsetStatusError(true);\n\t\t\t\t\tsetRestaurantName(\"Su mesa no ha sido encontrado.\");\n\t\t\t\t} else {\n                    setTable(json);\n\t\t\t\t\tsetRestaurantLoading(true);\n\t\t\t\t\tsetColor(!json.calling_server)\n\t\t\t\t}\n\t\t\t});\n\t}, []);\n\n    const handleMozo = () =>{\n        fetch(`https://ver-la-carta.herokuapp.com/mesas/${restaurantId}/${tableId}/server`, {\n\t\t\tmethod: \"PUT\",\n\t\t\tbody: JSON.stringify({}),\n\t\t\theaders: {\n\t\t\t\t\"Content-Type\": \"application/json\",\n\t\t\t},\n\t\t})\n\t\t.then((res) => res.json())\n\t\t.then((json) => {\n\t\t\tsetTable(json);\n\t\t\tsetColor(table.calling_server);\n\t\t\tif (color === true){\n\t\t\t\twindow.alert(`mozo llamado`);\n\t\t\t}else{\n\t\t\t\twindow.alert(`mozo liberado`);\n\t\t\t}\n\t\t\t\n\t\t})\n    };\n\n\treturn (\n\t\trestaurantLoading ? (\n\t\t\t<div >\n\t\t\t\t<div className={styles.titleContainer}>\n\t\t\t\t\t<Typography variant=\"h3\" component=\"h1\">{restaurantName}</Typography>\n\t\t\t\t\t<GoBackButton route={ROUTES.HOME} />\n                </div>\n\t\t\t\t\n\t\t\t\t<Typography variant=\"h5\" className={styles.subtitle}>\n\t\t\t\t\tMesa {tableId}\n\t\t\t\t</Typography>\n\t\t\t\n            \t<div className={styles.displayButtonsColumn}>\n\t\t\t\t\t<ButtonGroup\n            \t    orientation=\"vertical\"\n\t\t\t\t\talign=\"center\">\n\t\t    \t        <Button variant=\"text\" href={`/menu/${restaurantId}?mesa=${tableId}`}> \n\n            \t            Ver carta\n            \t        </Button>\n\n\t\t    \t        <Button color=\"primary\" variant=\"text\" href={`/restaurante/${restaurantId}/hacer_pedido?mesa=${tableId}`}> \n            \t            Hacer pedido\n            \t        </Button>\n\n            \t        <Button\n            \t        onClick = {handleMozo}\n            \t        color={color ? \"primary\" : \"secondary\"}\n            \t        variant={color ? \"text\" : \"contained\"}\n\t\t\t\t\t\t> \n            \t        \t{color ? \"LLamar mozo\" : \"Liberar mozo\"}\n            \t        </Button>\n\t\t\t\t\t</ButtonGroup>\n            \t</div>\n\t\t\t</div>\n\t\t) : (\n\t\t\t<p>Recuperando información del restaurante.</p>\n\t\t)\n\t\t\n\t);\n};\nexport default WelcomeTable;"]},"metadata":{},"sourceType":"module"}