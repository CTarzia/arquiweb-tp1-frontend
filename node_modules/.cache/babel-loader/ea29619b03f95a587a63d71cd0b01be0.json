{"ast":null,"code":"import _toConsumableArray from \"/home/widergy/Documents/Guido/UBA/arqweb/verLaCartaFront/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _slicedToArray from \"/home/widergy/Documents/Guido/UBA/arqweb/verLaCartaFront/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"/home/widergy/Documents/Guido/UBA/arqweb/verLaCartaFront/src/screens/NearbyRestaurants/RestaurantInfo/index.js\";\n\nimport React, { useState, useEffect } from \"react\";\nimport { Button, ButtonGroup, Typography } from \"@mui/material\";\nimport Paper from \"@mui/material/Paper\";\nimport ImageList from \"@mui/material/ImageList\";\nimport ImageListItem from \"@mui/material/ImageListItem\";\nimport styles from \"./styles.module.scss\";\n\nvar RestaurantInfo = function RestaurantInfo(_ref) {\n  var restaurante = _ref.restaurante;\n\n  var _useState = useState(),\n      _useState2 = _slicedToArray(_useState, 2),\n      restaurantName = _useState2[0],\n      setRestaurantName = _useState2[1];\n\n  var _useState3 = useState(),\n      _useState4 = _slicedToArray(_useState3, 2),\n      info = _useState4[0],\n      setInfo = _useState4[1];\n\n  var _useState5 = useState(false),\n      _useState6 = _slicedToArray(_useState5, 2),\n      statusError = _useState6[0],\n      setStatusError = _useState6[1];\n\n  var _useState7 = useState(false),\n      _useState8 = _slicedToArray(_useState7, 2),\n      restaurantLoading = _useState8[0],\n      setRestaurantLoading = _useState8[1];\n\n  var _useState9 = useState(false),\n      _useState10 = _slicedToArray(_useState9, 2),\n      imagesLoading = _useState10[0],\n      setImagesLoading = _useState10[1];\n\n  var _useState11 = useState([]),\n      _useState12 = _slicedToArray(_useState11, 2),\n      photos = _useState12[0],\n      setPhotos = _useState12[1];\n\n  useEffect(function () {\n    console.log(restaurante);\n\n    if (restaurante && restaurante.id) {\n      fetch(\"https://ver-la-carta.herokuapp.com/restaurantes/\".concat(restaurante.id, \"/\")).then(function (res) {\n        return res.json();\n      }).then(function (json) {\n        console.log(\"hizo el fetch\");\n\n        if (json.status === 404) {\n          setStatusError(true);\n          setRestaurantName(\"Su restaurante no ha sido encontrado.\");\n        } else {\n          setRestaurantName(json.name);\n          setInfo(json);\n          setRestaurantLoading(true);\n        }\n      });\n\n      var fetchImages = function fetchImages(imageId) {\n        fetch(\"https://ver-la-carta.herokuapp.com/imagen/\".concat(imageId, \"/\")).then(function (response) {\n          return response.blob();\n        }).then(function (image) {\n          // Create a local URL of that image\n          var localUrl = URL.createObjectURL(image);\n          setPhotos(function (photos) {\n            return [].concat(_toConsumableArray(photos), [{\n              url: localUrl,\n              id: imageId\n            }]);\n          });\n          setImagesLoading(true);\n        });\n      };\n\n      fetch(\"https://ver-la-carta.herokuapp.com/imagen/resto/\".concat(restaurante.id, \"/\")).then(function (response) {\n        return response.json();\n      }).then(function (imageIds) {\n        imageIds.map(fetchImages);\n      });\n    }\n  }, [restaurante]);\n  return restaurantLoading ? /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.container,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 3\n    }\n  }, /*#__PURE__*/React.createElement(Typography, {\n    variant: \"h4\",\n    component: \"h2\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 4\n    }\n  }, info.name), /*#__PURE__*/React.createElement(Paper, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 4\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 6\n    }\n  }, \"Horario de atenci\\xF3n: \", info.workinghours), /*#__PURE__*/React.createElement(\"p\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 6\n    }\n  }, \"Tel\\xE9fono de contacto: \", info.phoneNumber)), /*#__PURE__*/React.createElement(\"div\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 5\n    }\n  }, imagesLoading ? /*#__PURE__*/React.createElement(\"div\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(ImageList, {\n    sx: {\n      width: 500,\n      height: 450\n    },\n    cols: 3,\n    rowHeight: 164,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 8\n    }\n  }, photos.map(function (item) {\n    return /*#__PURE__*/React.createElement(ImageListItem, {\n      key: item.url,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 10\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: item.url,\n      alt: item.id,\n      loading: \"lazy\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 11\n      }\n    }));\n  }))) : /*#__PURE__*/React.createElement(\"div\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 7\n    }\n  }, \"Recuperando im\\xE1genes de su restaurante...\")), /*#__PURE__*/React.createElement(\"div\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(ButtonGroup, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 6\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    variant: \"text\",\n    href: \"http://localhost:3000/menu/\".concat(restaurante.id),\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 7\n    }\n  }, \"Ver Carta\"), /*#__PURE__*/React.createElement(Button, {\n    variant: \"text\",\n    href: \"/restaurante/\".concat(restaurante.id, \"/hacer_pedido\"),\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 7\n    }\n  }, \"Hacer Pedido\"))))) : /*#__PURE__*/React.createElement(\"div\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 3\n    }\n  }, \" Recuperando informaci\\xF3n del restaurante.\");\n};\n\nexport default RestaurantInfo;","map":{"version":3,"sources":["/home/widergy/Documents/Guido/UBA/arqweb/verLaCartaFront/src/screens/NearbyRestaurants/RestaurantInfo/index.js"],"names":["React","useState","useEffect","Button","ButtonGroup","Typography","Paper","ImageList","ImageListItem","styles","RestaurantInfo","restaurante","restaurantName","setRestaurantName","info","setInfo","statusError","setStatusError","restaurantLoading","setRestaurantLoading","imagesLoading","setImagesLoading","photos","setPhotos","console","log","id","fetch","then","res","json","status","name","fetchImages","imageId","response","blob","image","localUrl","URL","createObjectURL","url","imageIds","map","container","workinghours","phoneNumber","width","height","item"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { Button, ButtonGroup, Typography } from \"@mui/material\";\nimport Paper from \"@mui/material/Paper\";\nimport ImageList from \"@mui/material/ImageList\";\nimport ImageListItem from \"@mui/material/ImageListItem\";\n\nimport styles from \"./styles.module.scss\";\n\nconst RestaurantInfo = ({ restaurante }) => {\n\tconst [restaurantName, setRestaurantName] = useState();\n\tconst [info, setInfo] = useState();\n\tconst [statusError, setStatusError] = useState(false);\n\tconst [restaurantLoading, setRestaurantLoading] = useState(false);\n\tconst [imagesLoading, setImagesLoading] = useState(false);\n\tconst [photos, setPhotos] = useState([]);\n\n\tuseEffect(() => {\n\t\tconsole.log(restaurante);\n\t\tif (restaurante && restaurante.id) {\n\t\t\tfetch(\n\t\t\t\t`https://ver-la-carta.herokuapp.com/restaurantes/${restaurante.id}/`\n\t\t\t)\n\t\t\t\t.then((res) => res.json())\n\t\t\t\t.then((json) => {\n\t\t\t\t\tconsole.log(\"hizo el fetch\");\n\t\t\t\t\tif (json.status === 404) {\n\t\t\t\t\t\tsetStatusError(true);\n\t\t\t\t\t\tsetRestaurantName(\"Su restaurante no ha sido encontrado.\");\n\t\t\t\t\t} else {\n\t\t\t\t\t\tsetRestaurantName(json.name);\n\t\t\t\t\t\tsetInfo(json);\n\t\t\t\t\t\tsetRestaurantLoading(true);\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\tconst fetchImages = (imageId) => {\n\t\t\t\tfetch(`https://ver-la-carta.herokuapp.com/imagen/${imageId}/`)\n\t\t\t\t\t.then((response) => response.blob())\n\t\t\t\t\t.then((image) => {\n\t\t\t\t\t\t// Create a local URL of that image\n\t\t\t\t\t\tconst localUrl = URL.createObjectURL(image);\n\t\t\t\t\t\tsetPhotos((photos) => [...photos, { url: localUrl, id: imageId }]);\n\t\t\t\t\t\tsetImagesLoading(true);\n\t\t\t\t\t});\n\t\t\t};\n\n\t\t\tfetch(\n\t\t\t\t`https://ver-la-carta.herokuapp.com/imagen/resto/${restaurante.id}/`\n\t\t\t)\n\t\t\t\t.then((response) => response.json())\n\t\t\t\t.then((imageIds) => {\n\t\t\t\t\timageIds.map(fetchImages);\n\t\t\t\t});\n\t\t}\n\t}, [restaurante]);\n\n\treturn restaurantLoading ? (\n\t\t<div className={styles.container}>\n\t\t\t<Typography variant=\"h4\" component=\"h2\">\n\t\t\t\t{info.name}\n\t\t\t</Typography>\n\t\t\t<Paper>\n\t\t\t\t<div>\n\t\t\t\t\t<p>Horario de atención: {info.workinghours}</p>\n\t\t\t\t\t<p>Teléfono de contacto: {info.phoneNumber}</p>\n\t\t\t\t</div>\n\t\t\t\t<div>\n\t\t\t\t\t{imagesLoading ? (\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<ImageList\n\t\t\t\t\t\t\t\tsx={{ width: 500, height: 450 }}\n\t\t\t\t\t\t\t\tcols={3}\n\t\t\t\t\t\t\t\trowHeight={164}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{photos.map((item) => (\n\t\t\t\t\t\t\t\t\t<ImageListItem key={item.url}>\n\t\t\t\t\t\t\t\t\t\t<img src={item.url} alt={item.id} loading=\"lazy\" />\n\t\t\t\t\t\t\t\t\t</ImageListItem>\n\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t</ImageList>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t) : (\n\t\t\t\t\t\t<div>Recuperando imágenes de su restaurante...</div>\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\t\t\t\t<div>\n\t\t\t\t\t<ButtonGroup>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tvariant=\"text\"\n\t\t\t\t\t\t\thref={`http://localhost:3000/menu/${restaurante.id}`}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tVer Carta\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tvariant=\"text\"\n\t\t\t\t\t\t\thref={`/restaurante/${restaurante.id}/hacer_pedido`}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tHacer Pedido\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</ButtonGroup>\n\t\t\t\t</div>\n\t\t\t</Paper>\n\t\t</div>\n\t) : (\n\t\t<div> Recuperando información del restaurante.</div>\n\t);\n};\n\nexport default RestaurantInfo;\n"]},"metadata":{},"sourceType":"module"}