{"ast":null,"code":"import _slicedToArray from\"/home/chiara/repos/arquiweb-tp1/react-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import{useParams}from\"react-router\";import styles from\"./styles.module.scss\";import GoBackButton from\"../../components/GoBack\";import{ROUTES}from\"../../constants/routes\";import{useLocation}from\"react-router-dom\";import{Link}from\"react-router-dom\";var Menu=function Menu(){var _useState=useState(),_useState2=_slicedToArray(_useState,2),menu=_useState2[0],setMenu=_useState2[1];var _useParams=useParams(),restaurantId=_useParams.restoId;var search=useLocation().search;var tableId=new URLSearchParams(search).get(\"mesa\");function showFile(blob){var newBlob=new Blob([blob],{type:\"application/pdf\"});var data=window.URL.createObjectURL(newBlob);var link=document.createElement(\"a\");link.href=data;setMenu(data);}useEffect(function(){fetch(\"https://ver-la-carta.herokuapp.com/carta/\".concat(restaurantId),{responseType:\"blob\"}).then(function(response){return response.blob();}).then(showFile);},[]);var callServer=function callServer(){fetch(\"https://ver-la-carta.herokuapp.com/mesas/\".concat(restaurantId,\"/\").concat(tableId,\"/call\"),{method:\"POST\",body:JSON.stringify({}),headers:{\"Content-Type\":\"application/json\"}}).then(function(res){return res.json();}).then(function(json){window.alert(\"Mesero en camino!\");});};return/*#__PURE__*/React.createElement(\"div\",{className:styles.container},/*#__PURE__*/React.createElement(\"object\",{data:menu,type:\"application/pdf\",width:\"60%\",height:\"500px\"}),/*#__PURE__*/React.createElement(Link,{to:tableId?\"/restaurante/\".concat(restaurantId,\"/hacer_pedido?mesa=\").concat(tableId):\"/restaurante/\".concat(restaurantId,\"/hacer_pedido\")},/*#__PURE__*/React.createElement(\"button\",{className:styles.button},\"Hacer pedido\")),tableId&&/*#__PURE__*/React.createElement(\"button\",{className:styles.button,onClick:callServer},\" \",\"LLamar al mozo\",\" \"));};export default Menu;","map":{"version":3,"sources":["/home/chiara/repos/arquiweb-tp1/react-frontend/src/screens/Menu/index.js"],"names":["React","useState","useEffect","useParams","styles","GoBackButton","ROUTES","useLocation","Link","Menu","menu","setMenu","restaurantId","restoId","search","tableId","URLSearchParams","get","showFile","blob","newBlob","Blob","type","data","window","URL","createObjectURL","link","document","createElement","href","fetch","responseType","then","response","callServer","method","body","JSON","stringify","headers","res","json","alert","container","button"],"mappings":"qKAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,KAA2C,OAA3C,CACA,OAASC,SAAT,KAA0B,cAA1B,CACA,MAAOC,CAAAA,MAAP,KAAmB,sBAAnB,CACA,MAAOC,CAAAA,YAAP,KAAyB,yBAAzB,CACA,OAASC,MAAT,KAAuB,wBAAvB,CACA,OAASC,WAAT,KAA4B,kBAA5B,CACA,OAASC,IAAT,KAAqB,kBAArB,CAEA,GAAMC,CAAAA,IAAI,CAAG,QAAPA,CAAAA,IAAO,EAAM,CAClB,cAAwBR,QAAQ,EAAhC,wCAAOS,IAAP,eAAaC,OAAb,eAEA,eAAkCR,SAAS,EAA3C,CAAiBS,YAAjB,YAAQC,OAAR,CACA,GAAMC,CAAAA,MAAM,CAAGP,WAAW,GAAGO,MAA7B,CACA,GAAMC,CAAAA,OAAO,CAAG,GAAIC,CAAAA,eAAJ,CAAoBF,MAApB,EAA4BG,GAA5B,CAAgC,MAAhC,CAAhB,CAEA,QAASC,CAAAA,QAAT,CAAkBC,IAAlB,CAAwB,CACvB,GAAIC,CAAAA,OAAO,CAAG,GAAIC,CAAAA,IAAJ,CAAS,CAACF,IAAD,CAAT,CAAiB,CAAEG,IAAI,CAAE,iBAAR,CAAjB,CAAd,CAEA,GAAMC,CAAAA,IAAI,CAAGC,MAAM,CAACC,GAAP,CAAWC,eAAX,CAA2BN,OAA3B,CAAb,CACA,GAAIO,CAAAA,IAAI,CAAGC,QAAQ,CAACC,aAAT,CAAuB,GAAvB,CAAX,CACAF,IAAI,CAACG,IAAL,CAAYP,IAAZ,CAEAZ,OAAO,CAACY,IAAD,CAAP,CACA,CAEDrB,SAAS,CAAC,UAAM,CACf6B,KAAK,oDAA6CnB,YAA7C,EAA6D,CACjEoB,YAAY,CAAE,MADmD,CAA7D,CAAL,CAGEC,IAHF,CAGO,SAACC,QAAD,QAAcA,CAAAA,QAAQ,CAACf,IAAT,EAAd,EAHP,EAIEc,IAJF,CAIOf,QAJP,EAKA,CANQ,CAMN,EANM,CAAT,CAQA,GAAMiB,CAAAA,UAAU,CAAG,QAAbA,CAAAA,UAAa,EAAM,CACxBJ,KAAK,oDACwCnB,YADxC,aACwDG,OADxD,UAEJ,CACCqB,MAAM,CAAE,MADT,CAECC,IAAI,CAAEC,IAAI,CAACC,SAAL,CAAe,EAAf,CAFP,CAGCC,OAAO,CAAE,CACR,eAAgB,kBADR,CAHV,CAFI,CAAL,CAUEP,IAVF,CAUO,SAACQ,GAAD,QAASA,CAAAA,GAAG,CAACC,IAAJ,EAAT,EAVP,EAWET,IAXF,CAWO,SAACS,IAAD,CAAU,CACflB,MAAM,CAACmB,KAAP,CAAa,mBAAb,EACA,CAbF,EAcA,CAfD,CAiBA,mBACC,2BAAK,SAAS,CAAEvC,MAAM,CAACwC,SAAvB,eACC,8BAAQ,IAAI,CAAElC,IAAd,CAAoB,IAAI,CAAC,iBAAzB,CAA2C,KAAK,CAAC,KAAjD,CAAuD,MAAM,CAAC,OAA9D,EADD,cAEC,oBAAC,IAAD,EACC,EAAE,CACDK,OAAO,wBACYH,YADZ,+BAC8CG,OAD9C,yBAEYH,YAFZ,iBAFT,eAOC,8BAAQ,SAAS,CAAER,MAAM,CAACyC,MAA1B,iBAPD,CAFD,CAWE9B,OAAO,eACP,8BAAQ,SAAS,CAAEX,MAAM,CAACyC,MAA1B,CAAkC,OAAO,CAAEV,UAA3C,EACE,GADF,kBAEgB,GAFhB,CAZF,CADD,CAoBA,CA9DD,CAgEA,cAAe1B,CAAAA,IAAf","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { useParams } from \"react-router\";\nimport styles from \"./styles.module.scss\";\nimport GoBackButton from \"../../components/GoBack\";\nimport { ROUTES } from \"../../constants/routes\";\nimport { useLocation } from \"react-router-dom\";\nimport { Link } from \"react-router-dom\";\n\nconst Menu = () => {\n\tconst [menu, setMenu] = useState();\n\n\tconst { restoId: restaurantId } = useParams();\n\tconst search = useLocation().search;\n\tconst tableId = new URLSearchParams(search).get(\"mesa\");\n\n\tfunction showFile(blob) {\n\t\tvar newBlob = new Blob([blob], { type: \"application/pdf\" });\n\n\t\tconst data = window.URL.createObjectURL(newBlob);\n\t\tvar link = document.createElement(\"a\");\n\t\tlink.href = data;\n\n\t\tsetMenu(data);\n\t}\n\n\tuseEffect(() => {\n\t\tfetch(`https://ver-la-carta.herokuapp.com/carta/${restaurantId}`, {\n\t\t\tresponseType: \"blob\",\n\t\t})\n\t\t\t.then((response) => response.blob())\n\t\t\t.then(showFile);\n\t}, []);\n\n\tconst callServer = () => {\n\t\tfetch(\n\t\t\t`https://ver-la-carta.herokuapp.com/mesas/${restaurantId}/${tableId}/call`,\n\t\t\t{\n\t\t\t\tmethod: \"POST\",\n\t\t\t\tbody: JSON.stringify({}),\n\t\t\t\theaders: {\n\t\t\t\t\t\"Content-Type\": \"application/json\",\n\t\t\t\t},\n\t\t\t}\n\t\t)\n\t\t\t.then((res) => res.json())\n\t\t\t.then((json) => {\n\t\t\t\twindow.alert(\"Mesero en camino!\");\n\t\t\t});\n\t};\n\n\treturn (\n\t\t<div className={styles.container}>\n\t\t\t<object data={menu} type=\"application/pdf\" width=\"60%\" height=\"500px\" />\n\t\t\t<Link\n\t\t\t\tto={\n\t\t\t\t\ttableId\n\t\t\t\t\t\t? `/restaurante/${restaurantId}/hacer_pedido?mesa=${tableId}`\n\t\t\t\t\t\t: `/restaurante/${restaurantId}/hacer_pedido`\n\t\t\t\t}\n\t\t\t>\n\t\t\t\t<button className={styles.button}>Hacer pedido</button>\n\t\t\t</Link>\n\t\t\t{tableId && (\n\t\t\t\t<button className={styles.button} onClick={callServer}>\n\t\t\t\t\t{\" \"}\n\t\t\t\t\tLLamar al mozo{\" \"}\n\t\t\t\t</button>\n\t\t\t)}\n\t\t</div>\n\t);\n};\n\nexport default Menu;\n"]},"metadata":{},"sourceType":"module"}