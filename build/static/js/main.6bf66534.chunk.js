(this["webpackJsonpreact-frontend"]=this["webpackJsonpreact-frontend"]||[]).push([[0],{103:function(e,t,a){e.exports={title:"styles_title__1OFvA",button:"styles_button__2zlNu"}},122:function(e,t,a){e.exports={button:"styles_button__2kTXl"}},145:function(e,t,a){e.exports=a(166)},150:function(e,t,a){},16:function(e,t,a){e.exports={container:"styles_container__3S2tN",content:"styles_content__2iOrP",ordersContainer:"styles_ordersContainer__3XNlL",orderCard:"styles_orderCard__8YPK2",title:"styles_title__3DaAU",acceptButton:"styles_acceptButton__2_EFM",icon:"styles_icon__2fbUg",deleteButton:"styles_deleteButton__1vsrn",viewContentButton:"styles_viewContentButton__2W25W"}},166:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(38),c=a.n(r),s=a(218),l=(a(150),a(6)),i=a(14),u=a(17),m="/",d="/login",b="/signup",p="/backoffice",_="/backoffice/restaurante",f="/backoffice/mesas",h="/backoffice/pedidos",E="/menu/:restoId",v="/restaurante/:id/hacer_pedido",N="/restaurantes_cercanos",y="/estado_del_pedido",g=a(55),O=a.n(g),C=function(){return o.a.createElement("div",{className:O.a.container},o.a.createElement("div",{className:O.a.title},o.a.createElement("h1",null," \xa1Bienvenido a Ver la Carta! ")),o.a.createElement("div",{className:O.a.buttonsContainer},o.a.createElement(i.b,{to:N},o.a.createElement("button",{className:O.a.button},"Ver restaurantes cercanos")),o.a.createElement(i.b,{to:y},o.a.createElement("button",{className:O.a.button},"Ver estado de pedido")),o.a.createElement(i.b,{to:d},o.a.createElement("button",{className:O.a.button},"Login Admins"))))},j=a(5),S=a(15),k=a(227),I=Object(n.createContext)({userId:null,setUserId:function(){},userName:function(){},setUserName:function(){},restaurantId:null,setRestaurantId:function(){},restaurant:{},setRestaurant:function(){}}),w=a(120),B=a.n(w),x=a(117),T=a.n(x),P=a(62),R=a.n(P),D=function(e){var t=e.onChangePassword,a=Object(n.useState)(!1),r=Object(l.a)(a,2),c=r[0],s=r[1];return o.a.createElement("div",{className:R.a.input},o.a.createElement("label",{className:R.a.label},"Contrase\xf1a:"),o.a.createElement("input",{type:c?"text":"password",name:"password",id:"password",onChange:t}),o.a.createElement("div",{onClick:function(){return s(!c)},className:R.a.iconContainer},c?o.a.createElement(T.a,{className:R.a.icon}):o.a.createElement(B.a,{className:R.a.icon})))},U=a(43),L=a.n(U),A=function(e){var t=e.history,a=Object(n.useContext)(I),r=a.setUserId,c=a.setUserName,s=a.setRestaurantId,u=Object(n.useState)(!1),m=Object(l.a)(u,2),d=m[0],_=m[1],f=Object(n.useState)({username:"",password:""}),h=Object(l.a)(f,2),E=h[0],v=h[1],N=function(e){e.preventDefault(),_(!0),fetch("https://ver-la-carta.herokuapp.com/usuarios/".concat(E.username,"/").concat(E.password)).then((function(e){return e.json()})).then((function(e){s(e.restaurantId),r(e.id),c(e.username),_(!1),t.push(p)}))},y=function(e){var t=e.target,a=t.id,n=t.value;v((function(e){return Object(S.a)(Object(S.a)({},e),{},Object(j.a)({},a,n))}))};return o.a.createElement("div",{className:L.a.container},o.a.createElement("div",{className:L.a.title},o.a.createElement("h1",null," Bienvenido ")),o.a.createElement("form",{onSubmit:N,className:L.a.form},o.a.createElement("div",{className:L.a.input},o.a.createElement("label",{className:L.a.label},"Nombre de usuario:"),o.a.createElement("input",{type:"text",name:"username",id:"username",onChange:y})),o.a.createElement(D,{onChangePassword:y}),o.a.createElement("button",{className:d?L.a.disabledButton:L.a.button,onClick:N,disabled:d},d?o.a.createElement(k.a,{classes:{root:L.a.progress}}):"Iniciar sesion"),o.a.createElement(i.b,{to:b},o.a.createElement("button",{className:L.a.button},"Crear usuario"))))},M=a(221),G=a(219),J=a(44),V=a.n(J),H=function(e){var t=e.history,a=Object(n.useState)({username:"",password:""}),r=Object(l.a)(a,2),c=r[0],s=r[1],u=Object(n.useState)({latitude:null,longitude:null}),m=Object(l.a)(u,2),b=m[0],p=m[1],_=Object(n.useState)({isOpen:!1,message:""}),f=Object(l.a)(_,2),h=f[0],E=f[1],v=Object(n.useState)(!1),N=Object(l.a)(v,2),y=N[0],g=N[1],O=function(e){var t,a;return p({latitude:null===e||void 0===e||null===(t=e.coords)||void 0===t?void 0:t.latitude.toString(),longitude:null===e||void 0===e||null===(a=e.coords)||void 0===a?void 0:a.longitude.toString()})};Object(n.useEffect)((function(){navigator.geolocation&&navigator.geolocation.getCurrentPosition(O)}),[]);var C=function(e){e.preventDefault(),g(!0);var t=Object(S.a)({name:"Restaurante nuevo"},b);fetch("https://ver-la-carta.herokuapp.com/restaurantes/",{method:"POST",body:JSON.stringify(Object(S.a)({},t)),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){fetch("https://ver-la-carta.herokuapp.com/usuarios/",{method:"POST",body:JSON.stringify(Object(S.a)(Object(S.a)({},c),{},{restaurantId:e.id})),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){console.log(e),E({isOpen:!0,message:"Su usuario se ha creado con exito"}),g(!1)}))}))},I=function(e){var t=e.target,a=t.id,n=t.value;s((function(e){return Object(S.a)(Object(S.a)({},e),{},Object(j.a)({},a,n))}))};return o.a.createElement("div",{className:V.a.container},o.a.createElement("div",{className:V.a.title},o.a.createElement("h1",null," Crear usuario ")),o.a.createElement("form",{onSubmit:C,className:V.a.form},o.a.createElement("div",{className:V.a.input},o.a.createElement("label",{className:V.a.label},"Nombre de usuario:"),o.a.createElement("input",{type:"text",name:"username",id:"username",onChange:I})),o.a.createElement(D,{onChangePassword:I}),o.a.createElement("button",{className:y?V.a.disabledButton:V.a.button,onClick:C,disabled:y},y?o.a.createElement(k.a,{classes:{root:V.a.progress}}):"Crear usuario"),o.a.createElement(i.b,{to:d},o.a.createElement("button",{className:V.a.button},"Iniciar Sesion"))),o.a.createElement(M.a,{open:h.isOpen,autoHideDuration:3e3,onClose:function(){E({isOpen:!1,message:"Su usuario se ha creado con exito: Redirigiendo"}),t.push(d)}},o.a.createElement(G.a,{severity:"success",sx:{width:"100%"},variant:"filled"},h.message)))},F=a(82),X=a(83),W=a(71),z=a(130),K=a(129),Q=a(103),q=a.n(Q),Y=function(e){var t=e.returnRoute,a=e.title;return o.a.createElement("div",{className:q.a.title},o.a.createElement("h1",null," ",a," "),o.a.createElement(i.b,{to:t},o.a.createElement("button",{className:q.a.button}," Volver ")))},Z=a(72),$=a.n(Z),ee=function(e){var t=e.handleSubmit,a=e.handleChange,n=e.inputValue,r=e.order,c=e.showError;return o.a.createElement("div",{className:$.a.container},o.a.createElement(Y,{returnRoute:N,title:"Estado de pedido"}),o.a.createElement("form",{onSubmit:t,className:$.a.form},o.a.createElement("label",{className:$.a.label},"Numero de pedido:"),o.a.createElement("input",{type:"text",value:n,onChange:a}),o.a.createElement("input",{type:"submit",value:"Buscar Pedido",className:$.a.button})),c&&o.a.createElement("p",null,"Pedido no encontrado, revise la informacion ingresada e intentelo de nuevo."),r&&!c&&o.a.createElement("p",null,"Numero de pedido: ",r.orderId,", Contenido: ",r.content,", Estado:",r.status))},te=function(e){Object(z.a)(a,e);var t=Object(K.a)(a);function a(e){var n;return Object(F.a)(this,a),(n=t.call(this,e)).state={order:String,dataisLoaded:!1},n.handleChange=n.handleChange.bind(Object(W.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(W.a)(n)),n}return Object(X.a)(a,[{key:"handleChange",value:function(e){this.setState({value:e.target.value})}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault(),fetch("https://ver-la-carta.herokuapp.com/orders/"+this.state.value).then((function(e){return e.json()})).then((function(e){t.setState({order:e})}))}},{key:"render",value:function(){var e=this.state.order,t="404"===e.status;return o.a.createElement(ee,{handleSubmit:this.handleSubmit,handleChange:this.handleChange,inputValue:this.state.value,showError:t,order:e})}}]),a}(o.a.Component),ae=a(90),ne=a.n(ae),oe=(a(123),a(122),function(){var e=Object(n.useState)(),t=Object(l.a)(e,2),a=t[0],r=t[1],c=Object(u.g)().restoId,s=Object(u.f)().search,m=new URLSearchParams(s).get("mesa");function d(e){var t=new Blob([e],{type:"application/pdf"}),a=window.URL.createObjectURL(t);document.createElement("a").href=a,r(a)}Object(n.useEffect)((function(){fetch("https://ver-la-carta.herokuapp.com/carta/".concat(c),{responseType:"blob"}).then((function(e){return e.blob()})).then(d)}),[]);return o.a.createElement("div",{className:ne.a.container},o.a.createElement("object",{data:a,type:"application/pdf",width:"60%",height:"500px"}),o.a.createElement(i.b,{to:m?"/restaurante/".concat(c,"/hacer_pedido?mesa=").concat(m):"/restaurante/".concat(c,"/hacer_pedido")},o.a.createElement("button",{className:ne.a.button},"Hacer pedido")),m&&o.a.createElement("button",{className:ne.a.button,onClick:function(){fetch("https://ver-la-carta.herokuapp.com/mesas/".concat(c,"/").concat(m,"/call"),{method:"POST",body:JSON.stringify({}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){window.alert("Mesero en camino!")}))}}," ","LLamar al mozo"," "))}),re=a(42),ce=a.n(re),se=a(217),le=function(e){var t=e.handleSubmit,a=e.handleOnInputChange,n=e.tableNumber;return o.a.createElement("form",{onSubmit:t,className:ce.a.form},o.a.createElement("div",{className:ce.a.input},o.a.createElement("span",{className:ce.a.span},"Ingrese su nombre:"),n&&o.a.createElement("span",{className:ce.a.span},"Usted est\xe1 en la mesa ",n,"."),o.a.createElement(se.a,{name:"clientName",label:"Ingrese su nombre",variant:"outlined",onChange:a})),o.a.createElement("div",{className:ce.a.input},o.a.createElement("span",{className:ce.a.span},"Ingrese su pedido:"),o.a.createElement(se.a,{name:"content",label:"Ingrese su pedido",variant:"outlined",onChange:a})),o.a.createElement("button",{type:"submit",className:ce.a.button},"Enviar pedido"))},ie=function(){var e=Object(n.useState)({}),t=Object(l.a)(e,2),a=t[0],r=t[1],c=Object(u.g)().id,s=Object(u.f)().search,i=new URLSearchParams(s).get("mesa"),m=(new URLSearchParams(s).get("name"),new URLSearchParams(s).get("appId"));return o.a.createElement("div",{className:ce.a.container},o.a.createElement(Y,{returnRoute:N,title:"Hacer Pedido"}),o.a.createElement(le,{handleSubmit:function(e){e.preventDefault();var t=i?"table":"pickup",n=a;i&&(n=Object(S.a)(Object(S.a)({},a),{},{tableNumber:i})),"2"!==m?fetch("https://ver-la-carta.herokuapp.com/orders/".concat(t,"/").concat(c),{method:"POST",body:JSON.stringify(Object(S.a)({},n)),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){i?window.alert("Su pedido ha sido enviado."):(console.log(e),window.alert("Su pedido ha sido enviado. Su n\xfamero de pedido es: ".concat(e.orderId,".")))})):(console.log("tendria que haber entrado aca"),fetch("https://arquiweb-tp1.herokuapp.com/api/restaurants/".concat(c,"/orders/new"),{method:"POST",body:JSON.stringify({order_text:n.content}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){i?window.alert("Su pedido ha sido enviado."):(console.log(e),window.alert("Su pedido ha sido enviado. Su n\xfamero de pedido es: ".concat(e.orderId,".")))})))},handleOnInputChange:function(e){r(Object(S.a)(Object(S.a)({},a),{},Object(j.a)({},e.target.name,e.target.value)))},tableNumber:i}))},ue=a(225),me=a(124),de=a.n(me),be=a(125),pe=a.n(be),_e=a(73),fe=a.n(_e),he=function(e){var t=e.withGoBack,a=e.title,r=e.history,c=Object(n.useContext)(I),s=c.setUserId,l=c.setUserName,u=c.setRestaurantId,m=c.setRestaurant;return o.a.createElement("div",{className:fe.a.title},o.a.createElement("h1",null," ",a," "),o.a.createElement("div",{className:fe.a.content},t&&o.a.createElement(i.b,{to:p},o.a.createElement("button",{className:fe.a.button},o.a.createElement(de.a,null))),o.a.createElement("button",{onClick:function(){s(null),l(null),u(null),m({}),r.push(d)},className:fe.a.button},o.a.createElement(pe.a,null))))},Ee=a(74),ve=a.n(Ee),Ne=a(20),ye=a.n(Ne),ge=function(e){var t=e.restaurant,a=e.handleEdit,n=e.handleEditAddress;return o.a.createElement("div",{className:ye.a.informationContainer},o.a.createElement("span",{className:ye.a.informationTitle},"Informacion General:"),o.a.createElement("div",{className:ye.a.information},o.a.createElement("div",{className:ye.a.informationName},o.a.createElement("li",{className:ye.a.bullet})," ","Nombre: ".concat(t.name)),o.a.createElement("button",{className:ye.a.iconButton,onClick:function(){return a("name")}},o.a.createElement(ve.a,{classes:ye.a.icon}))),o.a.createElement("div",{className:ye.a.information},o.a.createElement("div",{className:ye.a.informationName},o.a.createElement("li",{className:ye.a.bullet}),"Horarios: ".concat(t.workingHours||"-")),o.a.createElement("button",{className:ye.a.iconButton,onClick:function(){return a("workingHours")}},o.a.createElement(ve.a,{classes:ye.a.icon}))),o.a.createElement("div",{className:ye.a.information},o.a.createElement("div",{className:ye.a.informationName},o.a.createElement("li",{className:ye.a.bullet}),"Contacto: ".concat(t.phoneNumber||"-")),o.a.createElement("button",{className:ye.a.iconButton,onClick:function(){return a("phoneNumber")}},o.a.createElement(ve.a,{classes:ye.a.icon}))),o.a.createElement("div",{className:ye.a.information},o.a.createElement("div",{className:ye.a.informationName},o.a.createElement("li",{className:ye.a.bullet}),"Direccion: LAT:".concat(t.latitude,";LON:").concat(t.longitude)),o.a.createElement("button",{className:ye.a.iconButton,onClick:function(){return n()}},o.a.createElement(ve.a,{classes:ye.a.icon}))))},Oe=a(228),Ce=a(222),je=a(63),Se=a.n(je),ke=function(e){var t=e.generalDialogOpen,a=e.handleCloseDialogs,n=e.handleSubmit,r=e.handleChange,c=e.values,s=e.loading;return o.a.createElement(Oe.a,{open:t,onClose:a},o.a.createElement(Ce.a,null,"Editar Direccion:"),o.a.createElement("form",{onSubmit:n,className:Se.a.form},o.a.createElement("div",{className:Se.a.input},o.a.createElement("input",{type:"text",name:"latitude",id:"latitude",onChange:r,value:c.latitude}),o.a.createElement("input",{type:"text",name:"longitude",id:"longitude",onChange:r,value:c.longitude})),o.a.createElement("button",{className:s?Se.a.disabledButton:Se.a.button,onClick:n,disabled:s},s?o.a.createElement(k.a,{classes:{root:Se.a.progress}}):"Aceptar")))},Ie=a(64),we=a.n(Ie),Be=function(e){var t=e.generalDialogOpen,a=e.handleCloseDialogs,n=e.handleSubmit,r=e.handleChange,c=e.values,s=e.loading;return o.a.createElement(Oe.a,{open:t,onClose:a},o.a.createElement(Ce.a,null,"Editar informacion:"),o.a.createElement("form",{onSubmit:n,className:we.a.form},o.a.createElement("div",{className:we.a.input},o.a.createElement("input",{type:"text",name:t,id:t,onChange:r,value:c[t]})),o.a.createElement("button",{className:s?we.a.disabledButton:we.a.button,onClick:n,disabled:s},s?o.a.createElement(k.a,{classes:{root:we.a.progress}}):"Aceptar")))},xe=a(49),Te=a.n(xe),Pe=function(e){var t=e.history,a=Object(n.useContext)(I),r=a.userId,c=a.restaurantId,s=a.restaurant,i=a.setRestaurant,u=Object(n.useState)(),m=Object(l.a)(u,2),b=m[0],p=m[1],_=Object(n.useState)(),f=Object(l.a)(_,2),h=f[0],E=f[1],v=Object(n.useState)({name:s.name,workingHours:s.workingHours,phoneNumber:s.phoneNumber,latitude:s.latitude,longitude:s.longitude}),N=Object(l.a)(v,2),y=N[0],g=N[1],O=Object(n.useState)(!1),C=Object(l.a)(O,2),k=C[0],w=C[1],B=Object(n.useState)(),x=Object(l.a)(B,2),T=x[0],P=x[1],R=Object(n.useState)(!1),D=Object(l.a)(R,2),U=D[0],L=D[1];Object(n.useEffect)((function(){r&&c||t.push(d),fetch("https://ver-la-carta.herokuapp.com/carta/".concat(c)).then((function(e){return 404===e.status?"error":e.blob()})).then((function(e){if(console.log(e),"error"!==e){var t=URL.createObjectURL(e);P(t)}}))}),[]);var A=function(e){e.preventDefault(),w(!0),fetch("https://ver-la-carta.herokuapp.com/restaurantes/".concat(c),{method:"PUT",body:JSON.stringify(Object(S.a)({},y)),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){i(e),G(!1)}))},M=function(e){var t=e.target,a=t.id,n=t.value;g((function(e){return Object(S.a)(Object(S.a)({},e),{},Object(j.a)({},a,n))}))},G=function(){p(null),E(null),w(!1)},J=function(e){var t="PUT";T||(t="POST"),function(e){return new Promise((function(t,a){var n=new FileReader;n.onload=function(e){t(e.target.result)},n.readAsDataURL(e)}))}(e).then((function(e){P(e)}));var a=new FormData;a.append("file",e),fetch("https://ver-la-carta.herokuapp.com/carta/".concat(c),{method:t,body:a}).then((function(e){console.log(e)})).catch(P(null))};return o.a.createElement("div",{className:Te.a.container},o.a.createElement(he,{title:"Gestionar: ".concat(s.name),history:t,withGoBack:!0}),o.a.createElement("div",{className:Te.a.content},o.a.createElement("div",{className:Te.a.leftContent},o.a.createElement(ge,{restaurant:s,handleEdit:function(e){return p(e)},handleEditAddress:function(){return E("address")}}),b&&o.a.createElement(Be,{generalDialogOpen:b,handleCloseDialogs:G,handleSubmit:A,handleChange:M,values:y,loading:k}),h&&o.a.createElement(ke,{generalDialogOpen:h,handleCloseDialogs:G,handleSubmit:A,handleChange:M,values:y,loading:k}),o.a.createElement("div",null,o.a.createElement("div",{className:Te.a.menuContainer},T&&o.a.createElement("button",{className:Te.a.uploadImageButton,onClick:function(){return L(!U)}},"Ver carta"),o.a.createElement("label",{className:Te.a.uploadImage,for:"upload-menu"},T?"Editar carta":"Subir carta"),o.a.createElement("input",{style:{display:"none"},id:"upload-menu",name:"upload-menu",type:"file",onChange:function(e){return J(e.target.files[0]||null)}})))),o.a.createElement("div",{className:Te.a.rightContent},o.a.createElement("div",{className:Te.a.showMenu},T&&U&&o.a.createElement(ue.a,{component:"img",height:"400",width:"400",image:T,alt:"img reastaurant"})))))},Re=a(18),De=a(214),Ue=a(231),Le=a(215),Ae=a(216),Me=a(86),Ge=a.n(Me),Je=a(87),Ve=a.n(Je),He=a(29),Fe=a.n(He),Xe=function(e){var t=e.restaurant,a=e.handleClick;return o.a.createElement("div",{className:Fe.a.container},o.a.createElement("span",{className:Fe.a.name}," ",t.name," "),t.phoneNumber&&o.a.createElement("div",{className:Fe.a.infoContainer},o.a.createElement(Ge.a,{className:Fe.a.icon}),o.a.createElement("span",{className:Fe.a.label}," ",t.phoneNumber," ")),t.workingHours&&o.a.createElement("div",{className:Fe.a.infoContainer},o.a.createElement(Ve.a,{className:Fe.a.icon}),o.a.createElement("span",{className:Fe.a.label},t.workingHours," ")),t.description&&o.a.createElement("div",{className:Fe.a.infoContainer},o.a.createElement("span",{className:Fe.a.label},t.description," ")),1===t.appId&&o.a.createElement("button",{onClick:function(){return a(t)},className:Fe.a.button},"Ver detalle"),"2"===t.appId&&o.a.createElement(i.b,{to:"/restaurante/".concat(t.id,"/hacer_pedido?appId=2&name=").concat(t.name)},o.a.createElement("button",{className:Fe.a.button}," Hacer Pedido ")))},We=a(229),ze=a(230),Ke=a(30),Qe=a.n(Ke),qe=function(e){var t=e.restaurant,a=e.handleClose,r=Object(n.useState)(!1),c=Object(l.a)(r,2),s=c[0],u=c[1],m=Object(n.useState)([]),d=Object(l.a)(m,2),b=d[0],p=d[1];return Object(n.useEffect)((function(){if(t&&t.id){var e=function(e){fetch("https://ver-la-carta.herokuapp.com/imagen/".concat(e,"/")).then((function(e){return e.blob()})).then((function(t){var a=URL.createObjectURL(t);p((function(t){return[].concat(Object(Re.a)(t),[{url:a,id:e}])})),u(!0)}))};fetch("https://ver-la-carta.herokuapp.com/imagen/resto/".concat(t.id,"/")).then((function(e){return e.json()})).then((function(t){t.map(e)}))}}),[t]),o.a.createElement("div",{className:Qe.a.container},o.a.createElement("div",null,o.a.createElement("div",{className:Qe.a.title},o.a.createElement("h2",null,null===t||void 0===t?void 0:t.name),o.a.createElement("button",{onClick:function(){p([]),a()},className:Qe.a.closeButton},"X")),o.a.createElement("div",{className:Qe.a.infoContainer},o.a.createElement(Ge.a,{className:Qe.a.icon}),o.a.createElement("span",{className:Qe.a.label}," ",null===t||void 0===t?void 0:t.phoneNumber," ")),o.a.createElement("div",{className:Qe.a.infoContainer},o.a.createElement(Ve.a,{className:Qe.a.icon}),o.a.createElement("span",{className:Qe.a.label},null===t||void 0===t?void 0:t.workingHours," ")),o.a.createElement("div",null,s?o.a.createElement("div",null,o.a.createElement(We.a,{sx:{width:330,height:280},cols:2,rowHeight:280},b.map((function(e){return o.a.createElement(ze.a,{key:e.url},o.a.createElement("img",{src:e.url,alt:e.id,loading:"lazy"}))})))):o.a.createElement("div",null,"Recuperando im\xe1genes de su restaurante..."))),o.a.createElement("div",{className:Qe.a.buttonContainers},o.a.createElement(i.b,{to:"/menu/".concat(null===t||void 0===t?void 0:t.id)},o.a.createElement("button",{className:Qe.a.button}," Ver Menu ")),o.a.createElement(i.b,{to:"/restaurante/".concat(null===t||void 0===t?void 0:t.id,"/hacer_pedido?name=").concat(null===t||void 0===t?void 0:t.name)},o.a.createElement("button",{className:Qe.a.button}," Hacer Pedido "))))},Ye=a(91),Ze=a.n(Ye),$e=function(){var e=Object(n.useState)([]),t=Object(l.a)(e,2),a=t[0],r=t[1],c=Object(n.useState)([]),s=Object(l.a)(c,2),i=s[0],u=s[1],d=Object(n.useState)([]),b=Object(l.a)(d,2),p=b[0],_=b[1],f=Object(n.useState)(),h=Object(l.a)(f,2),E=h[0],v=h[1],N=Object(n.useState)(!1),y=Object(l.a)(N,2),g=y[0],O=y[1];Object(n.useEffect)((function(){fetch("https://ver-la-carta.herokuapp.com/restaurantes/").then((function(e){return console.log(e),200===e.status?e.json():{error:"No se encontraron restaurantes"}})).then((function(e){e.error?console.log("error"):r(e)})),fetch("https://arquiweb-tp1.herokuapp.com/api/restaurants").then((function(e){return e.json()})).then((function(e){u(e.items)}))}),[]),Object(n.useEffect)((function(){_([].concat(Object(Re.a)(a),Object(Re.a)(i)))}),[a,i]);var C=function(e){v(e),O(!0)};return o.a.createElement("div",{className:Ze.a.container},o.a.createElement(Y,{returnRoute:m,title:"Restaurantes cercanos"}),o.a.createElement("div",{className:Ze.a.infoContainer},o.a.createElement(De.a,{className:Ze.a.map,center:[-34.603722,-58.381592],zoom:12,scrollWheelZoom:!0},o.a.createElement(Ue.a,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:'\xa9 <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'}),p.map((function(e){return e.latitude&&e.longitude&&o.a.createElement(Le.a,{position:[parseFloat(e.latitude),parseFloat(e.longitude)]},o.a.createElement(Ae.a,null,o.a.createElement(Xe,{restaurant:e,handleClick:C})))}))),E&&g&&o.a.createElement(qe,{restaurant:E,isOpen:g&&E,handleClose:function(){return O(!1)}})))},et=a(56),tt=a.n(et),at=function(e){var t=e.history,a=Object(n.useContext)(I),r=a.userId,c=a.restaurantId,s=a.restaurant,u=a.setRestaurant,m=Object(n.useState)(!1),b=Object(l.a)(m,2),p=b[0],E=b[1];return Object(n.useEffect)((function(){r&&c?(E(!0),fetch("https://ver-la-carta.herokuapp.com/restaurantes/".concat(c)).then((function(e){return e.json()})).then((function(e){u(e),E(!1)}))):t.push(d)}),[]),o.a.createElement("div",{className:tt.a.container},o.a.createElement(he,{title:s.name?"Bienvenido a ".concat(s.name,"!"):"Bienvenido!",history:t}),p?o.a.createElement(k.a,{classes:{root:tt.a.progress}}):o.a.createElement("div",{className:tt.a.buttonsContainer},o.a.createElement(i.b,{to:_},o.a.createElement("button",{className:tt.a.button},"Gestionar mi local")),o.a.createElement(i.b,{to:h},o.a.createElement("button",{className:tt.a.button},"Gestionar pedidos")),o.a.createElement(i.b,{to:f},o.a.createElement("button",{className:tt.a.button},"Gestionar mesas"))))},nt=a(127),ot=a.n(nt),rt=a(126),ct=a.n(rt),st=a(22),lt=a.n(st),it=function(e){var t=e.history,a=Object(n.useContext)(I),r=a.userId,c=a.restaurantId,s=a.restaurant,i=Object(n.useState)([]),u=Object(l.a)(i,2),m=u[0],b=u[1],p=Object(n.useState)(!1),_=Object(l.a)(p,2),f=_[0],h=_[1],E=Object(n.useState)(""),v=Object(l.a)(E,2),N=v[0],y=v[1],g=Object(n.useState)(),O=Object(l.a)(g,2),C=O[0],j=O[1];Object(n.useEffect)((function(){r&&c?fetch("https://ver-la-carta.herokuapp.com/mesas/".concat(c)).then((function(e){return e.json()})).then((function(e){b(e)})):t.push(d)}),[]);return console.log(m),o.a.createElement("div",{className:lt.a.container},o.a.createElement(he,{title:"Gestionar: ".concat(s.name),history:t,withGoBack:!0}),o.a.createElement("div",{className:lt.a.content},m.map((function(e){return o.a.createElement("div",{className:lt.a.tableContainer},o.a.createElement("div",{className:lt.a.infoContainer},o.a.createElement("span",{className:lt.a.tableTitle},"Mesa N\xb0 ".concat(e.tableNumber,": ")),o.a.createElement("div",{className:e.callingServer?lt.a.callingServer:lt.a.notCallingServer})),o.a.createElement("div",{className:lt.a.buttonsContainer},o.a.createElement("button",{className:lt.a.button,onClick:function(){return function(e){j(!0),y("https://verlacarta6.herokuapp.com/menu/".concat(c,"?mesa=").concat(e.tableId))}(e)}},"Ver QR carta"),o.a.createElement("button",{className:lt.a.button,onClick:function(){return function(e){j(!0),y("https://verlacarta6.herokuapp.com/restaurante/".concat(c,"/hacer_pedido?mesa=").concat(e.tableId,"&name=").concat(s.name))}(e)}},"Ver QR pedido"),o.a.createElement("button",{className:"".concat(lt.a.button," ").concat(lt.a.deleteButton),onClick:function(){return function(e){fetch("https://ver-la-carta.herokuapp.com/mesas/".concat(c,"/").concat(e.tableId),{method:"DELETE",body:JSON.stringify({}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(t){var a=m.filter((function(t){return t.tableId!==e.tableId}));b(a||[])}))}(e)}},"Borrar Mesa")))})),o.a.createElement("div",{className:lt.a.addTableContainer},o.a.createElement("span",{className:lt.a.addTableTitle}," Agregar Mesa: "),o.a.createElement("button",{className:f?lt.a.addTableButtonLoading:lt.a.addTableButton,onClick:function(){h(!0),fetch("https://ver-la-carta.herokuapp.com/mesas/".concat(c),{method:"POST",body:JSON.stringify({}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){b([].concat(Object(Re.a)(m),[e])),h(!1)}))}},f?o.a.createElement(k.a,{classes:lt.a.progress}):o.a.createElement(ot.a,{className:lt.a.addIcon})))),C&&o.a.createElement(Oe.a,{open:C,onClose:function(){j(!1),y(null)}},o.a.createElement(Ce.a,null,"Escanee el siguiente QR"),o.a.createElement(ct.a,{value:N})))},ut=a(92),mt=a.n(ut),dt=a(128),bt=a.n(dt),pt=a(93),_t=a.n(pt),ft=a(16),ht=a.n(ft),Et=function(e){var t=e.history,a=Object(n.useContext)(I),r=a.userId,c=a.restaurantId,s=a.restaurant,i=Object(n.useState)([]),u=Object(l.a)(i,2),m=u[0],b=u[1];Object(n.useEffect)((function(){r&&c?fetch("https://ver-la-carta.herokuapp.com/restaurantes/".concat(c,"/pedidos")).then((function(e){return e.json()})).then((function(e){b(e)})):t.push(d)}),[]);var p=Object(n.useMemo)((function(){return m.filter((function(e){return"PENDING"===e.status}))}),[m]),_=Object(n.useMemo)((function(){return m.filter((function(e){return"PROGRESS"===e.status}))}),[m]),f=Object(n.useMemo)((function(){return m.filter((function(e){return"READY"===e.status}))}),[m]);console.log(m);var h=function(e){return window.alert("Pedido: ".concat(e.content,"\n").concat("PICKUP"===e.type?"nombre: ".concat(e.clientName):""))},E=function(e,t){fetch("https://ver-la-carta.herokuapp.com/orders/".concat(e.orderId),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(Object(S.a)(Object(S.a)({},e),{},{status:t}))}).then((function(){fetch("https://ver-la-carta.herokuapp.com/restaurantes/".concat(c,"/pedidos")).then((function(e){return e.json()})).then((function(e){b(e)}))}))};return o.a.createElement("div",{className:ht.a.container},o.a.createElement(he,{title:"Gestionar: ".concat(s.name),history:t,withGoBack:!0}),o.a.createElement("div",{className:ht.a.content},o.a.createElement("div",{className:ht.a.ordersContainer},o.a.createElement("span",{className:ht.a.title}," Pendientes "),p.map((function(e){return o.a.createElement("div",{className:ht.a.orderCard},o.a.createElement("span",null,"TABLE"===e.type?"Mesa: ".concat(e.tableNumber):"Pickup: ".concat(e.orderId)),o.a.createElement("button",{className:ht.a.viewContentButton,onClick:function(){return h(e)}},o.a.createElement(mt.a,{className:ht.a.icon})),o.a.createElement("button",{className:ht.a.deleteButton,onClick:function(){return E(e,"DENIED")}},o.a.createElement(bt.a,{className:ht.a.icon})),o.a.createElement("button",{className:ht.a.acceptButton,onClick:function(){return E(e,"PROGRESS")}},o.a.createElement(_t.a,{className:ht.a.icon})))}))),o.a.createElement("div",{className:ht.a.ordersContainer},o.a.createElement("span",{className:ht.a.title}," En curso "),_.map((function(e){return o.a.createElement("div",{className:ht.a.orderCard},o.a.createElement("span",null,"TABLE"===e.type?"Mesa: ".concat(e.tableNumber):"Pickup: ".concat(e.orderId)),o.a.createElement("button",{className:ht.a.viewContentButton,onClick:function(){return h(e)}},o.a.createElement(mt.a,{className:ht.a.icon})),o.a.createElement("button",{className:ht.a.acceptButton,onClick:function(){return E(e,"READY")}},o.a.createElement(_t.a,{className:ht.a.icon})))}))),o.a.createElement("div",{className:ht.a.ordersContainer},o.a.createElement("span",{className:ht.a.title}," En curso "),f.map((function(e){return o.a.createElement("div",{className:ht.a.orderCard},o.a.createElement("span",null,"TABLE"===e.type?"Mesa: ".concat(e.tableNumber):"Pickup: ".concat(e.orderId)),o.a.createElement("button",{className:ht.a.viewContentButton,onClick:function(){return h(e)}},o.a.createElement(mt.a,{className:ht.a.icon})),o.a.createElement("button",{className:ht.a.acceptButton,onClick:function(){return function(e){fetch("https://ver-la-carta.herokuapp.com/orders/".concat(e.orderId),{method:"DELETE",headers:{"Content-Type":"application/json"}}).then((function(){fetch("https://ver-la-carta.herokuapp.com/restaurantes/".concat(c,"/pedidos")).then((function(e){return e.json()})).then((function(e){b(e)}))}))}(e)}},o.a.createElement(_t.a,{className:ht.a.icon})))})))))};var vt=function(){var e=Object(n.useState)(),t=Object(l.a)(e,2),a=t[0],r=t[1],c=Object(n.useState)(),s=Object(l.a)(c,2),g=s[0],O=s[1],j=Object(n.useState)(),S=Object(l.a)(j,2),k=S[0],w=S[1],B=Object(n.useState)({}),x=Object(l.a)(B,2),T=x[0],P=x[1],R=Object(n.useMemo)((function(){return{userId:a,setUserId:r,userName:g,setUserName:O,restaurantId:k,setRestaurantId:w,restaurant:T,setRestaurant:P}}),[a,g,k,T]);return o.a.createElement(I.Provider,{value:R},o.a.createElement(i.a,null,o.a.createElement(u.c,null,o.a.createElement(u.a,{exact:!0,path:m,component:C}),o.a.createElement(u.a,{exact:!0,path:d,component:A}),o.a.createElement(u.a,{exact:!0,path:b,component:H}),o.a.createElement(u.a,{exact:!0,path:p,component:at}),o.a.createElement(u.a,{exact:!0,path:_,component:Pe}),o.a.createElement(u.a,{exact:!0,path:f,component:it}),o.a.createElement(u.a,{exact:!0,path:N,component:$e}),o.a.createElement(u.a,{exact:!0,path:v,component:ie}),o.a.createElement(u.a,{exact:!0,path:y,component:te}),o.a.createElement(u.a,{exact:!0,path:h,component:Et}),o.a.createElement(u.a,{exact:!0,path:E,component:oe}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(165);c.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(s.a,{injectFirst:!0},o.a.createElement(vt,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},20:function(e,t,a){e.exports={informationContainer:"styles_informationContainer__3T9Ny",informationTitle:"styles_informationTitle__toRJh",information:"styles_information__JRLvt",informationName:"styles_informationName__2AzKN",bullet:"styles_bullet__11cmp",iconButton:"styles_iconButton__1o5f9"}},22:function(e,t,a){e.exports={button:"styles_button__2aPSX",container:"styles_container__3Xgve",content:"styles_content__2ZFWr",addTableContainer:"styles_addTableContainer__2uLOj",addTableTitle:"styles_addTableTitle__-or_Y",addTableButton:"styles_addTableButton__2W3TT",addTableButtonLoading:"styles_addTableButtonLoading__33vct",addIcon:"styles_addIcon__32nuw",progress:"styles_progress__3J8bs",tableContainer:"styles_tableContainer__1j3sA",infoContainer:"styles_infoContainer__2023h",callingServer:"styles_callingServer__2qiDZ",notCallingServer:"styles_notCallingServer__KhhCe",buttonsContainer:"styles_buttonsContainer__1bkmD",deleteButton:"styles_deleteButton__2Om_0"}},29:function(e,t,a){e.exports={container:"styles_container__1qXlS",name:"styles_name__3SX04",infoContainer:"styles_infoContainer__1avr8",icon:"styles_icon__3ui3Q",label:"styles_label__Ma1vn",button:"styles_button__2Q3aY"}},30:function(e,t,a){e.exports={container:"styles_container__TmUCx",title:"styles_title__3dKfS",closeButton:"styles_closeButton__UaePO",infoContainer:"styles_infoContainer__1luJ8",icon:"styles_icon__3yZv2",label:"styles_label__2JYv9",button:"styles_button__vYZ50",buttonContainers:"styles_buttonContainers__as9M3"}},42:function(e,t,a){e.exports={button:"styles_button__2Q_Eb",container:"styles_container__2FWWE",titleContainer:"styles_titleContainer__3IpQP",form:"styles_form__1gEup",input:"styles_input__SX49O",displayOrder:"styles_displayOrder__3tCwc",span:"styles_span__kiEBa",displayOrdersColumns:"styles_displayOrdersColumns__13gI-",modal:"styles_modal__2yMDi","modal-content":"styles_modal-content__3DIj5",close:"styles_close__1XbQB"}},43:function(e,t,a){e.exports={button:"styles_button__2-MK2",disabledButton:"styles_disabledButton__2O_Fb",container:"styles_container__3O4Za",title:"styles_title__34AfG",form:"styles_form__17Nog",input:"styles_input__31alT",label:"styles_label__15T5C",progress:"styles_progress__hbx4W"}},44:function(e,t,a){e.exports={button:"styles_button__3sPG4",disabledButton:"styles_disabledButton__3NmBV",container:"styles_container__1gkIK",title:"styles_title__3BdC-",form:"styles_form__31vHG",input:"styles_input__2tlXk",label:"styles_label__3OE0O",progress:"styles_progress__1aaNk"}},49:function(e,t,a){e.exports={uploadImage:"styles_uploadImage__bADbm",uploadImageButton:"styles_uploadImageButton__18hGV",container:"styles_container__3Bj38",content:"styles_content__qX72h",leftContent:"styles_leftContent__3LOs1",rightContent:"styles_rightContent__1FDKH",menuContainer:"styles_menuContainer__2p2lF"}},55:function(e,t,a){e.exports={button:"styles_button__23gPD",container:"styles_container__3tuzV",title:"styles_title__1QT10",buttonsContainer:"styles_buttonsContainer__2sJZp"}},56:function(e,t,a){e.exports={button:"styles_button__1bo2G",container:"styles_container__2zBl1",title:"styles_title__1GuUC",buttonsContainer:"styles_buttonsContainer__12txV",progress:"styles_progress__1fzzh"}},62:function(e,t,a){e.exports={input:"styles_input__2FV4H",label:"styles_label__sYfrU",icon:"styles_icon__1ymMC",iconContainer:"styles_iconContainer__3idEQ"}},63:function(e,t,a){e.exports={button:"styles_button__Fy9Oj",disabledButton:"styles_disabledButton__3CfqM",form:"styles_form__1GchR",progress:"styles_progress__1vJBt"}},64:function(e,t,a){e.exports={button:"styles_button__ai0I7",disabledButton:"styles_disabledButton__3A2cP",form:"styles_form__2XxII",progress:"styles_progress__3JZKn"}},72:function(e,t,a){e.exports={button:"styles_button__2tfLA",container:"styles_container__31_fC",form:"styles_form__2rrKr"}},73:function(e,t,a){e.exports={title:"styles_title__38mPn",button:"styles_button__1g2nX"}},90:function(e,t,a){e.exports={button:"styles_button__2rd9_",container:"styles_container__luqwh",table:"styles_table__Ndodn"}},91:function(e,t,a){e.exports={map:"styles_map__3sDVx",title:"styles_title__2uevo",button:"styles_button__uFWOj",container:"styles_container__2SyAV",infoContainer:"styles_infoContainer__2VUsI"}}},[[145,1,2]]]);
//# sourceMappingURL=main.6bf66534.chunk.js.map